MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*********************************************************
                      00002 ;*  TAPE DRIVE EMULATOR FOR FPGA IMPLEMENTATION OF THE   *
                      00003 ;*  TRS80 MODEL MC-10 COMPUTER. DESIGNED FOR PIC16F747.  *
                      00004 ;*  ALL CODE WRITTEN BY STEVE L00SER-ROJAS               *
                      00005 ;*  SYSTEM CLOCK SHOULD BE 4 MHz.                        *
                      00006 ;*********************************************************
                      00007 
                      00008     LIST P=PIC16F747
                      00009     #INCLUDE <p16f747.inc>
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Jan 21 2019
                      00005 ;  MPASM PIC16F747 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00671         LIST
2007   3F23           00010     __CONFIG    _CONFIG1, _CP_OFF & _CCP2_RC1 & _DEBUG_OFF & _VBOR_2_7 & _BOREN_0 & _MCLR_ON & _PWRTE_ON
                             & _WDT_OFF & _EXTCLK
2008   3FBC           00011     __CONFIG    _CONFIG2, _BORSEN_0 & _IESO_OFF & _FCMEN_OFF
                      00012     ORG 0x000
                      00013 
                      00014 ;PIN USAGE:
                      00015 ; PORTA,0 TXD (SOFTWARE UART) OUTPUT
                      00016 ; PORTA,1 RXD (SOFTWARE UART) INPUT
                      00017 ; PORTA,2 DISPLAY CE OUTPUT
                      00018 ; PORTA,3 DISPLAY RS OUTPUT
                      00019 ; PORTA,4 UNUSED (OPEN DRAIN) OUTPUT
                      00020 ; PORTA,5 UNUSED OUTPUT
                      00021 ; PORTA,6 CLOCK INPUT
                      00022 ; PORTA,7 CLOCK INPUT
                      00023 ; PORTB,0 CH376S INTERRUPT INPUT
                      00024 ; PORTB,1 TAPE INPUT
                      00025 ; PORTB,2 TAPE OUTPUT
                      00026 ; PORTB,3 BUTTON 1 INPUT
                      00027 ; PORTB,4 BUTTON 2 INPUT
                      00028 ; PORTB,5 BUTTON 3 INPUT
                      00029 ; PORTB,6 BUTTON 4 INPUT    ICSP CLOCK
                      00030 ; PORTB,7 RAM CE OUTPUT     ICSP DATA
                      00031 ; PORTC,0 UNUSED OUTPUT
                      00032 ; PORTC,1 UNUSED OUTPUT
                      00033 ; PORTC,2 UNUSED OUTPUT
                      00034 ; PORTC,3 SCK (HARDWARE SPI) OUTPUT
                      00035 ; PORTC,4 SDI (HARDWARE SPI) INPUT
                      00036 ; PORTC,5 SDO (HARDWARE SPI) OUTPUT
                      00037 ; PORTC,6 TXD (HARDWARE UART) INPUT (MUST BE CONFIGURED AS INPUT FOR UART MODULE TO WORK. THIS IS ACTUAL
                            LY AN OUTPUT)
                      00038 ; PORTC,7 RXD (HARDWARE UART) INPUT
                      00039 ; PORTD,0 UNUSED OUTPUT
                      00040 ; PORTD,1 UNUSED OUTPUT
                      00041 ; PORTD,2 CH376S CE OUTPUT
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00042 ; PORTD,3 CH376S RESET OUTPUT
                      00043 ; PORTD,4 TEST OUTPUT
                      00044 ; PORTD,5 UNUSED OUTPUT
                      00045 ; PORTD,6 DISPLAY CLOCK OUTPUT
                      00046 ; PORTD,7 DISPLAY DATA OUTPUT
                      00047 ; PORTE,0 UNUSED OUTPUT
                      00048 ; PORTE,1 UNUSED OUTPUT
                      00049 ; PORTE,2 UNUSED OUTPUT
                      00050 
                      00051 ;REGISTER USAGE:
                      00052 VARS    udata
0000                  00053 DREG res 1          ;USED TO STORE RECEIVED DATA, KB_SEND, KB_READ
0001                  00054 TEMP1 RES 1         ;USED FOR TEMPORARY STORAGE
0002                  00055 TEMP2 RES 1
0003                  00056 TEMP3 RES 1         ;TEMPORARY VARIABLE FOR USE IN USER INTERFACE FUNCTIONS
0004                  00057 TEMP4 RES 1         ;USED TO STORE THE W REGISTER IN INTERRUPT HANDLERS
0005                  00058 PULSE_LENGTH RES 1  ;LENGTH OF THE TAPE PULSE
0006                  00059 RAM_ADDRESS_H RES 1 ;HIGH BYTE OF RAM ADDRESS
0007                  00060 RAM_ADDRESS_L RES 1 ;LOW BYTE OF RAM ADDRESS
0008                  00061 SDEL_COUNT RES 1    ;USED FOR SHORTDELAY
0009                  00062 LDEL_COUNT RES 1    ;USED FOR LONGDELAY_LCD
000A                  00063 GEN_COUNT RES 1     ;USED FOR FULLDELAY_232, HALFDELAY_232, TXDELAY_232
000B                  00064 GEN_COUNT2 RES 1    ;SECOND COUNTER FOR NESTED LOOPS
000C                  00065 GEN_COUNT3 RES 1    ;COUNTER FOR USE IN USER INTERFACE FUNCTIONS
000D                  00066 GEN_COUNT4 RES 1    ;FOR USE IN USB AND BUILD_WORD SUBROUTINES
000E                  00067 GEN_COUNT5 RES 1    ;FOR USB FUNCTIONS THAT CALL BUILD_WORD
000F                  00068 GEN_COUNT6 RES 1    ;FOR USB FUNCTIONS
0010                  00069 TAPE_NAME RES 8     ;USED TO STORE THE NAME OF THE PROGRAM WHEN THE NAME BLOCK IS PARSED
0018                  00070 TAPE_SIZE_HIGH RES 1    ;HIGH BYTE OF TAPE SIZE
0019                  00071 TAPE_SIZE_LOW RES 1     ;LOW BYTE OF TAPE SIZE
001A                  00072 BIT_COUNT RES 1     ;KEEPS TRACK OF CURRENT BIT FOR TAPE OUT
001B                  00073 HEX_CHAR_HIGH RES 1 ;FOR BYTE TO HEX CONVERSION
001C                  00074 HEX_CHAR_LOW RES 1
001D                  00075 USB_BYTES_SENT_HIGH RES 1
001E                  00076 USB_BYTES_SENT_LOW RES 1
001F                  00077 USB_FILE_SIZE_HIGH RES 1
0020                  00078 USB_FILE_SIZE_LOW RES 1
0021                  00079 USB_BYTES_READ_HIGH RES 1
0022                  00080 USB_BYTES_READ_LOW RES 1
                      00081 ;USB_DRIVE_SIZE0 RES 1  ;THE DRIVE SIZE IS GIVEN IN MULTIPLES OF 512, SO THE LSB IS ALWAYS 0
0023                  00082 USB_DRIVE_SIZE1 RES 1
0024                  00083 USB_DRIVE_SIZE2 RES 1
0025                  00084 USB_DRIVE_SIZE3 RES 1   ;MSB OF DRIVE SIZE
                      00085 ;USB_FREE_SPACE0 RES 1  ;FREE SPACE IS GIVEN IN MULTIPLES OF 512, SO THE LSB IS ALWAYS 0
0026                  00086 USB_FREE_SPACE1 RES 1
0027                  00087 USB_FREE_SPACE2 RES 1
0028                  00088 USB_FREE_SPACE3 RES 1   ;MSB OF FREE SPCAE
                      00089 ;USB_LOGICAL_BYTES0 RES 1   ;LOGICAL BYTES ARE SPECIFIED IN MULTIPLES OF 512, SO THE LSB IS ALWAYS 0
0029                  00090 USB_LOGICAL_BYTES1 RES 1
002A                  00091 USB_LOGICAL_BYTES2 RES 1
002B                  00092 USB_LOGICAL_BYTES3 RES 1    ;MSB OF LOGICAL BYTES
002C                  00093 USB_TARGET_STATUS RES 1 ;WAIT_STATUS WILL WAIT FOR THIS STATUS
002D                  00094 S_REG_HIGH RES 1    ;HIGH BYTE OF RANDOM WORD
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

002E                  00095 S_REG_LOW RES 1 ;LOW BYTE OF RANDOM WORD
002F                  00096 TIMEOUT_LOW RES 1 ;LSB OF TIMEOUT IN MILLISECONDS
0030                  00097 TIMEOUT_HIGH RES 1 ;MSB OF TIMEOUT IN MILLISECONDS
0031                  00098 DELAY_COUNTER RES 1 ;FOR DELAY MILLIS
0032                  00099 STRING_INDEX RES 1  ;OFFSET IN SELECTED STRING
0033                  00100 STRING_ID   RES 1   ;SELECTS A STRING
0034                  00101 FLAG_REG RES 1  ;BITS USED AS FLAGS FOR VARIOUS SUBROUTINES
                      00102 
                      00103 BUFS1 UDATA
0000                  00104 BUFFER_1 RES D'80'
                      00105 
                      00106 BUFS2 UDATA
0000                  00107 BUFFER_2 RES D'96'
                      00108 
                      00109 BUFS3 UDATA
0000                  00110 BUFFER_3 RES D'96'
                      00111 
                      00112 ;FLAG REG USAGE:
                      00113 ;BIT0 SET IF S_REG_LOW CONTAINS VALID DATA
                      00114 ;BIT1 SET IF BUILD_BYTE IS WAITING FOR THE FIRST BYTE OF A TRANSMISSION (PREVENTS RESET IF TRANSMISSION 
                            FAILS)
                      00115 ;BIT2 SET IF TIMEOUT OCCURED WHILE WAITING FOR USB STATUS
                      00116 ;BIT3 SET IF FREE SPACE EXCEEDS TAPE SIZE
                      00117 ;BIT4 SET IF FREE SPCAE EXCEEDS 0x20000
                      00118 ;BIT5 UNUSED
                      00119 ;BIT6 UNUSED
                      00120 ;BIT7 UNUSED
                      00121 
                      00122 RST CODE 0X00   ;RESET VECTOR
0000   ????           00123     PAGESEL INITIALIZE
0001   2???           00124     GOTO INITIALIZE
                      00125 INT CODE 0X04   ;INTERRUPT VECTOR
                      00126     ;MOVWF TEMP4
                      00127     ;BCF INTCON, T0IF
                      00128     ;MOVLW B'00010000'
                      00129     ;XORWF PORTD        ;TOGGLE TEST OUTPUT
                      00130     ;MOVF TEMP4, W
                      00131     ;RETFIE
0004   2???           00132     GOTO TAPE_INT
                      00133 
                      00134 START CODE 0X05   ;START OF PROGRAM
                      00135 
0005                  00136 INITIALIZE
0005   1283 1303      00137     BANKSEL PORTA
0007   0185           00138     CLRF PORTA
0008   0186           00139     CLRF PORTB
0009   0187           00140     CLRF PORTC
000A   0188           00141     CLRF PORTD
000B   1608           00142     BSF PORTD,4
000C   0985           00143     COMF PORTA, F
000D   0986           00144     COMF PORTB, F
000E   0987           00145     COMF PORTC, F
000F   1683 1303      00146     BANKSEL TRISA  ;SWITCH TO BANK 1
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0011   30C2           00147     MOVLW B'11000010'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0012   0085           00148     MOVWF TRISA ;CONFIGURE PORTA
0013   307B           00149     MOVLW B'01111011'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0014   0086           00150     MOVWF TRISB ;CONFIGURE PORTB
0015   30D0           00151     MOVLW B'11010000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0016   0087           00152     MOVWF TRISC ;CONFIGURE PORTC
0017   3000           00153     MOVLW B'00000000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0018   0088           00154     MOVWF TRISD ;CONFIGURE PORTD
0019   30F8           00155     MOVLW B'11111000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001A   0089           00156     MOVWF TRISE ;CONFIGURE PORTE
001B   3000           00157     MOVLW B'00000000'       ;SMP=0, CKE=0, DA=0, P=0, S=0, RW=0, UA=0, BF=0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001C   0094           00158     MOVWF SSPSTAT ;CONFIGURE SPI
001D   300F           00159     MOVLW B'00001111'       ;PCFG=1111
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
001E   009F           00160     MOVWF ADCON1 ;DISABLE ANALOG INPUTS
001F   3026           00161     MOVLW B'00100110'   ;CSRC=0, TX9=0, TXEN=1, SYNC=0, UNIMPLEMENTED=0, BRGH=1, TRMT=1, TX9D=0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0020   0098           00162     MOVWF TXSTA ;CONFIGURE UART
0021   3019           00163     MOVLW D'25'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0022   0099           00164     MOVWF SPBRG ;CONFIGURE BAUD RATE
0023   30D8           00165     MOVLW B'11011000'   ;RBPU = 1, INTEDG = 1, T0CS = 0, T0SE = 1, PSA = 1, PS2 = 0, PS1 = 0, PS0 = 0
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0024   0081           00166     MOVWF OPTION_REG    ;CONFIGURE TIMER
0025   1283 1303      00167     BANKSEL SSPCON
0027   3030           00168     MOVLW B'00110000'   ;WCOL=0, SSPOV=0, SSPEN=1, CKP=1, SSPM=0000
0028   0094           00169     MOVWF SSPCON ;CONFIGURE SPI
0029   3090           00170     MOVLW B'10010000'   ;SPEN=1, RX9=0,SREN=0, CREN=1, ADDEN=0, FERR=0, OERR=0, RX9D=0
002A   0098           00171     MOVWF RCSTA ;CONFIGURE UART
002B   3020           00172     MOVLW B'00100000'
002C   008B           00173     MOVWF INTCON    ;ENABLE TIMER 0 INTERRUPT
002D   01??           00174     CLRF FLAG_REG
002E   01??           00175     CLRF S_REG_HIGH
002F   01??           00176     CLRF S_REG_LOW
0030   3064           00177     MOVLW D'100'
0031   00??           00178     MOVWF DELAY_COUNTER
0032   2???           00179     CALL DELAY_MILLIS   ;100 MS DELAY AT STARTUP
0033   2???           00180     CALL RAM_CONFIG
0034   01??           00181     CLRF RAM_ADDRESS_H
0035   01??           00182     CLRF RAM_ADDRESS_L
0036   3055           00183     MOVLW H'55'
0037   00??           00184     MOVWF DREG
0038   2???           00185     CALL RAM_WRITE
0039   2???           00186     CALL FUNCTIONSET_LCD    ;INITIALIZE DISPLAY
003A   2???           00187     CALL DISPLAYON  ;POWER ON THE DISPLAY
003B   2???           00188     CALL CLEARDISPLAY   ;CLEAR THE DISPLAY
003C   2???           00189     CALL SETHOME_LCD    ;SET CURSOR TO THE START OF LINE 1
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

003D   2???           00190     GOTO MAIN   ;DO THE THING
                      00191 
003E                  00192 MAIN
003E   2???           00193     CALL UART_READ
003F   2???           00194     CALL UART_SEND
0040   08??           00195     MOVF DREG, W
0041   00??           00196     MOVWF TEMP1 ;SAVE DATA
0042   3AF1           00197     XORLW H'F1' ;IS F1?
0043   1903           00198     BTFSC STATUS, Z ;CHECK ZERO FLAG
0044   2???           00199     GOTO LISTEN     ;LISTEN TO TAPE AND PUT DATA IN MEMORY, THEN SEND DATA TO UART
0045   08??           00200     MOVF TEMP1, W
0046   3AF2           00201     XORLW H'F2' ;IS F2?
0047   1903           00202     BTFSC STATUS, Z ;CHECK ZERO FLAG
0048   2???           00203     GOTO SEND_TAPE  ;GENERATE TAPE AUDIO FROM DATA IN MEMORY
0049   08??           00204     MOVF TEMP1, W
004A   3AF3           00205     XORLW H'F3' ;IS F3?
004B   1903           00206     BTFSC STATUS, Z ;CHECK ZERO FLAG
004C   2???           00207     GOTO CMD_SETHOME
004D   08??           00208     MOVF TEMP1, W
004E   3AF4           00209     XORLW H'F4' ;IS F4?
004F   1903           00210     BTFSC STATUS, Z
0050   2???           00211     GOTO CMD_LINE2
0051   08??           00212     MOVF TEMP1, W
0052   3AF5           00213     XORLW H'F5'
0053   1903           00214     BTFSC STATUS, Z
0054   2???           00215     GOTO CMD_LCD_CLEAR1
0055   08??           00216     MOVF TEMP1, W
0056   3AF6           00217     XORLW H'F6'
0057   1903           00218     BTFSC STATUS, Z
0058   2???           00219     GOTO CMD_LCD_CLEAR2
0059   08??           00220     MOVF TEMP1, W
005A   3AF7           00221     XORLW H'F7'
005B   1903           00222     BTFSC STATUS, Z
005C   2???           00223     GOTO CMD_CLEARDISPLAY
005D   08??           00224     MOVF TEMP1, W
005E   3AF8           00225     XORLW H'F8'
005F   1903           00226     BTFSC STATUS, Z
0060   2???           00227     GOTO CMD_PRINT_NAME
0061   08??           00228     MOVF TEMP1, W
0062   3AF9           00229     XORLW H'F9'
0063   1903           00230     BTFSC STATUS, Z
0064   2???           00231     GOTO CMD_MEM_DUMP
0065   08??           00232     MOVF TEMP1, W
0066   3AFA           00233     XORLW H'FA'
0067   1903           00234     BTFSC STATUS, Z
0068   2???           00235     GOTO CMD_PRINT_HOME
0069   08??           00236     MOVF TEMP1, W
006A   3AFB           00237     XORLW H'FB' ;IS COMMAND 0xFB?
006B   1903           00238     BTFSC STATUS, Z
006C   2???           00239     GOTO CMD_MEM_CLEAR
006D   2???           00240     GOTO MAIN
006E                  00241 LISTEN
006E   2???           00242     CALL TAPE_IN
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

006F   30FF           00243     MOVLW H'FF'
0070   00??           00244     MOVWF RAM_ADDRESS_H
0071   00??           00245     MOVWF RAM_ADDRESS_L
0072   03??           00246     DECF TAPE_SIZE_LOW, F
0073   0F??           00247     INCFSZ TAPE_SIZE_LOW, W
0074   2???           00248     GOTO LISTEN2
0075   03??           00249     DECF TAPE_SIZE_HIGH, F
0076                  00250 LISTEN2
0076   2???           00251     CALL RAM_READ_AUTO
0077   2???           00252     CALL UART_SEND
0078   08??           00253     MOVF RAM_ADDRESS_H, W
0079   06??           00254     XORWF TAPE_SIZE_HIGH, W
007A   1D03           00255     BTFSS STATUS, Z
007B   2???           00256     GOTO LISTEN2
007C   08??           00257     MOVF RAM_ADDRESS_L, W
007D   06??           00258     XORWF TAPE_SIZE_LOW, W
007E   1D03           00259     BTFSS STATUS, Z
007F   2???           00260     GOTO LISTEN2
0080   0F??           00261     INCFSZ TAPE_SIZE_LOW, F    ;INCREMENT LOW ADDRESS
0081   03??           00262     DECF TAPE_SIZE_HIGH, F
0082   0A??           00263     INCF TAPE_SIZE_HIGH, F      ;IF LOW ADDRESS IS ZERO INCREMENT THE HIGH ADDRESS TOO
0083   2???           00264     GOTO MAIN
0084                  00265 SEND_TAPE
0084   2???           00266     CALL TAPE_OUT
0085   2???           00267     GOTO MAIN
0086                  00268 CMD_SETHOME
0086   2???           00269     CALL SETHOME_LCD
0087   2???           00270     GOTO MAIN
0088                  00271 CMD_LINE2
0088   2???           00272     CALL LINE2_LCD
0089   2???           00273     GOTO MAIN
008A                  00274 CMD_LCD_CLEAR1
008A   2???           00275     CALL LCD_CLEAR1
008B   2???           00276     GOTO MAIN
008C                  00277 CMD_LCD_CLEAR2
008C   2???           00278     CALL LCD_CLEAR2
008D   2???           00279     GOTO MAIN
008E                  00280 CMD_CLEARDISPLAY
008E   2???           00281     CALL CLEARDISPLAY
008F   2???           00282     GOTO MAIN
0090                  00283 CMD_PRINT_NAME
0090   2???           00284     CALL PRINT_NAME
0091   2???           00285     GOTO MAIN
0092                  00286 CMD_MEM_DUMP
0092   2???           00287     CALL MEM_DUMP
0093   2???           00288     GOTO MAIN
0094                  00289 CMD_PRINT_HOME
0094   01??           00290     CLRF STRING_ID
0095   2???           00291     CALL PRINT_STRING_LCD
0096   2???           00292     GOTO MAIN
0097                  00293 CMD_MEM_CLEAR
0097   2???           00294     CALL MEM_CLEAR
0098   2???           00295     GOTO MAIN
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00296 
0099                  00297 MEM_CLEAR
0099   01??           00298     CLRF RAM_ADDRESS_L
009A   01??           00299     CLRF RAM_ADDRESS_H
009B   09??           00300     COMF RAM_ADDRESS_L, F
009C   09??           00301     COMF RAM_ADDRESS_H, F
009D   01??           00302     CLRF DREG
009E   09??           00303     COMF DREG, F
009F                  00304 MEM_CLEAR_LOOP
009F   1608           00305     BSF PORTD, 4
00A0   2???           00306     CALL RAM_WRITE_AUTO
00A1   1208           00307     BCF PORTD, 4    ;PORTD 4 IS A DEBUG OUTPUT TO MEASURE THE DURATION OF RAM_WRITE
00A2   08??           00308     MOVF RAM_ADDRESS_L, W
00A3   3AFF           00309     XORLW H'FF'
00A4   1D03           00310     BTFSS STATUS, Z
00A5   2???           00311     GOTO MEM_CLEAR_LOOP
00A6   08??           00312     MOVF RAM_ADDRESS_H, W
00A7   3AFF           00313     XORLW H'FF'
00A8   1D03           00314     BTFSS STATUS, Z
00A9   2???           00315     GOTO MEM_CLEAR_LOOP
00AA   0008           00316     RETURN
                      00317 
00AB                  00318 MEM_DUMP
00AB   01??           00319     CLRF RAM_ADDRESS_L
00AC   01??           00320     CLRF RAM_ADDRESS_H
00AD   09??           00321     COMF RAM_ADDRESS_L, F
00AE   09??           00322     COMF RAM_ADDRESS_H, F
00AF                  00323 MEM_DUMP_LOOP
00AF   2???           00324     CALL RAM_READ_AUTO
00B0   2???           00325     CALL UART_SEND
00B1   08??           00326     MOVF RAM_ADDRESS_L, W
00B2   3AFF           00327     XORLW H'FF'
00B3   1D03           00328     BTFSS STATUS, Z
00B4   2???           00329     GOTO MEM_DUMP_LOOP
00B5   08??           00330     MOVF RAM_ADDRESS_H, W
00B6   3AFF           00331     XORLW H'FF'
00B7   1D03           00332     BTFSS STATUS, Z
00B8   2???           00333     GOTO MEM_DUMP_LOOP
00B9   0008           00334     RETURN
                      00335 
00BA                  00336 UART_READ
00BA   1E8C           00337     BTFSS PIR1,RCIF    ;CHECK IF UART RECEIVE BUFFER IS FULL
00BB   2???           00338     GOTO UART_READ  ;IF NOT WAIT UNTIL ITS FULL
00BC   081A           00339     MOVF RCREG, W   ;COPY DATA TO W
00BD   00??           00340     MOVWF DREG      ;COPY DATA TO DREG
00BE   0008           00341     RETURN
                      00342 
00BF                  00343 UART_SEND
00BF   1E0C           00344     BTFSS PIR1,TXIF    ;CHECK IF UART TRANSMIT BUFFER IS EMPTY
00C0   2???           00345     GOTO UART_SEND  ;IF NOT WAIT UNTIL IT IS
00C1   08??           00346     MOVF DREG, W    ;COPY DATA TO W
00C2   0099           00347     MOVWF TXREG     ;COPY DATA TO TXREG
00C3   0008           00348     RETURN
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00349 
00C4                  00350 RAM_READ_AUTO
00C4   0F??           00351     INCFSZ RAM_ADDRESS_L, F    ;INCREMENT LOW ADDRESS
00C5   03??           00352     DECF RAM_ADDRESS_H, F
00C6   0A??           00353     INCF RAM_ADDRESS_H, F       ;IF LOW ADDRESS IS ZERO INCREMENT THE HIGH ADDRESS TOO
00C7                  00354 RAM_READ
00C7   1386           00355     BCF PORTB, 7    ;CHIP ENABLE
00C8   3003           00356     MOVLW H'03' ;PUT WRITE COMMAND IN W
00C9   0093           00357     MOVWF SSPBUF    ;SEND COMMAND
00CA   08??           00358     MOVF RAM_ADDRESS_H, W   ;COPY ADDRESS TO W
00CB   1683 1303      00359     BANKSEL SSPSTAT
00CD                  00360 RAM_WAIT_AH
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00CD   1C14           00361     BTFSS SSPSTAT, BF   ;IS THE TRANSMISSION READY
00CE   2???           00362     GOTO RAM_WAIT_AH    ;IF NOT WAIT UNTIL IT IS
00CF   1283 1303      00363     BANKSEL SSPBUF
00D1   0093           00364     MOVWF SSPBUF    ;SEND ADDRESS HIGH BYTE
00D2   08??           00365     MOVF RAM_ADDRESS_L, W   ;COPY ADDRESS TO W
00D3   1683 1303      00366     BANKSEL SSPSTAT
00D5                  00367 RAM_WAIT_AL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00D5   1C14           00368     BTFSS SSPSTAT, BF
00D6   2???           00369     GOTO RAM_WAIT_AL
00D7   1283 1303      00370     BANKSEL SSPBUF
00D9   0093           00371     MOVWF SSPBUF    ;SEND ADDRESS LOW BYTE
00DA   1683 1303      00372     BANKSEL SSPSTAT
00DC                  00373 RAM_WAIT_D
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00DC   1C14           00374     BTFSS SSPSTAT, BF
00DD   2???           00375     GOTO RAM_WAIT_D
00DE   1283 1303      00376     BANKSEL SSPBUF
00E0   0193           00377     CLRF SSPBUF
00E1   1683 1303      00378     BANKSEL SSPSTAT
00E3                  00379 RAM_WAIT_R
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00E3   1C14           00380     BTFSS SSPSTAT, BF
00E4   2???           00381     GOTO RAM_WAIT_R
00E5   1283 1303      00382     BANKSEL SSPBUF
00E7   0813           00383     MOVF SSPBUF, W  ;COPY DATA TO W
00E8   00??           00384     MOVWF DREG  ;PUT DATA IN DREG
00E9   1786           00385     BSF PORTB, 7
00EA   0008           00386     RETURN
                      00387 
00EB                  00388 RAM_WRITE_AUTO
00EB   0F??           00389     INCFSZ RAM_ADDRESS_L, F    ;INCREMENT LOW ADDRESS
00EC   03??           00390     DECF RAM_ADDRESS_H, F
00ED   0A??           00391     INCF RAM_ADDRESS_H, F       ;IF LOW ADDRESS IS ZERO INCREMENT THE HIGH ADDRESS TOO
00EE                  00392 RAM_WRITE
00EE   1386           00393     BCF PORTB, 7    ;CHIP ENABLE
00EF   3002           00394     MOVLW H'02' ;PUT WRITE COMMAND IN W
00F0   0093           00395     MOVWF SSPBUF    ;SEND COMMAND
00F1   08??           00396     MOVF RAM_ADDRESS_H, W   ;COPY ADDRESS TO W
00F2   1683 1303      00397     BANKSEL SSPSTAT
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F4                  00398 RAM_WRITE_AH
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00F4   1C14           00399     BTFSS SSPSTAT, BF   ;IS THE TRANSMISSION READY
00F5   2???           00400     GOTO RAM_WRITE_AH   ;IF NOT WAIT UNTIL IT IS
00F6   1283 1303      00401     BANKSEL SSPBUF
00F8   0093           00402     MOVWF SSPBUF    ;SEND ADDRESS HIGH BYTE
00F9   08??           00403     MOVF RAM_ADDRESS_L, W   ;COPY ADDRESS TO W
00FA   1683 1303      00404     BANKSEL SSPSTAT
00FC                  00405 RAM_WRITE_AL
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00FC   1C14           00406     BTFSS SSPSTAT, BF
00FD   2???           00407     GOTO RAM_WRITE_AL
00FE   1283 1303      00408     BANKSEL SSPBUF
0100   0093           00409     MOVWF SSPBUF    ;SEND ADDRESS LOW BYTE
0101   08??           00410     MOVF DREG, W    ;COPY DATA TO W
0102   1683 1303      00411     BANKSEL SSPSTAT
0104                  00412 RAM_WRITE_D
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0104   1C14           00413     BTFSS SSPSTAT, BF
0105   2???           00414     GOTO RAM_WRITE_D
0106   1283 1303      00415     BANKSEL SSPBUF
0108   0093           00416     MOVWF SSPBUF    ;SEND DATA
0109   1683 1303      00417     BANKSEL SSPSTAT
010B                  00418 RAM_WRITE_R
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
010B   1C14           00419     BTFSS SSPSTAT, BF
010C   2???           00420     GOTO RAM_WRITE_R
010D   1283 1303      00421     BANKSEL SSPBUF
010F   0813           00422     MOVF SSPBUF, W  ;COPY DUMMY DATA TO W
0110   1786           00423     BSF PORTB, 7
0111   0008           00424     RETURN
                      00425 
0112                  00426 RAM_CONFIG
0112   1386           00427     BCF PORTB, 7    ;CHIP ENABLE
0113   3001           00428     MOVLW H'01' ;PUT WRITE COMMAND IN W
0114   0093           00429     MOVWF SSPBUF    ;SEND COMMAND
0115   3000           00430     MOVLW H'00' ;CONFIGURE FOR BYTE MODE
0116   1683 1303      00431     BANKSEL SSPSTAT
0118                  00432 RAM_CONFIG_C
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0118   1C14           00433     BTFSS SSPSTAT, BF   ;IS THE TRANSMISSION READY
0119   2???           00434     GOTO RAM_CONFIG_C   ;IF NOT WAIT UNTIL IT IS
011A   1283 1303      00435     BANKSEL SSPBUF
011C   0093           00436     MOVWF SSPBUF    ;SEND CONFIG DATA
011D   1683 1303      00437     BANKSEL SSPSTAT
011F                  00438 RAM_CONFIG_D
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
011F   1C14           00439     BTFSS SSPSTAT, BF
0120   2???           00440     GOTO RAM_CONFIG_D
0121   1283 1303      00441     BANKSEL SSPBUF
0123   0813           00442     MOVF SSPBUF, W  ;COPY DUMMY DATA TO W
0124   1786           00443     BSF PORTB, 7
0125   0008           00444     RETURN
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00445 
0126                  00446 LCD_SEND    ;SENDS DATA OR COMMAND TO LCD SHIFT REGISTER
0126   00??           00447     MOVWF TEMP3 ;COPY DATA TO TEMP VARIABLE
0127   3008           00448     MOVLW H'08'
0128   00??           00449     MOVWF GEN_COUNT3    ;COUNT 8 BITS
0129                  00450 LCD_SEND_LOOP
0129   1B80           00451     BTFSC TEMP3,7
012A   1788           00452     BSF PORTD,7
012B   1F80           00453     BTFSS TEMP3,7
012C   1388           00454     BCF PORTD,7
012D   0D??           00455     RLF TEMP3,F
012E   1708           00456     BSF PORTD,6
012F   0000           00457     NOP
0130   0000           00458     NOP
0131   1308           00459     BCF PORTD,6
0132   0B??           00460     DECFSZ GEN_COUNT3,F
0133   2???           00461     GOTO LCD_SEND_LOOP
0134   0008           00462     RETURN
                      00463 
0135                  00464 FUNCTIONSET_LCD
0135   1105           00465         BCF PORTA,2     ;MAKE SURE THAT E STARTS LOW
0136   1308           00466         BCF PORTD,6     ;MAKE SURE DISPLAY CLOCK STARTS LOW
0137   1185           00467         BCF PORTA,3     ;RS LINE TO 0 (PORT A BIT 3)
0138   3038           00468         MOVLW b'00111000'       ;FUNCTION SET COMMAND
0139   2???           00469         CALL LCD_SEND
013A   2???           00470         CALL PULSE_E    ;PULSE E LINE HIGH (PORT A BIT 2)
013B   300A           00471         MOVLW D'10'
013C   00??           00472         MOVWF DELAY_COUNTER
013D   2???           00473         CALL DELAY_MILLIS
013E   0008           00474         RETURN
                      00475 
013F                  00476 DISPLAYON
013F   1185           00477         BCF PORTA,3   ;RS LINE TO 0 (PORT A BIT 3)
0140   300F           00478         MOVLW 0FH  ;DISPLAY ON/OFF AND CURSOR COMMAND
0141   2???           00479         CALL LCD_SEND
0142   2???           00480         CALL PULSE_E
0143   300A           00481         MOVLW D'10'
0144   00??           00482         MOVWF DELAY_COUNTER
0145   2???           00483         CALL DELAY_MILLIS
0146   0008           00484         RETURN
                      00485 
0147                  00486 CLEARDISPLAY
0147   1185           00487         BCF PORTA,3     ;RS LINE LOW
0148   3001           00488         MOVLW 01H       ;CLEAR DISPLAY COMMAND
0149   2???           00489         CALL LCD_SEND   ;WRITE TO DATA LINES
014A   2???           00490         CALL PULSE_E
014B   300A           00491         MOVLW D'10'
014C   00??           00492         MOVWF DELAY_COUNTER
014D   2???           00493         CALL DELAY_MILLIS
014E   0008           00494         RETURN
                      00495 
014F                  00496 SETHOME_LCD
014F   1185           00497         BCF PORTA,3 ;RS LINE LOW
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0150   3003           00498         MOVLW 03H   ;DISPLAY AND CURSOR HOME COMMAND
0151   2???           00499         CALL LCD_SEND ;WRITE TO DATA LINES
0152   2???           00500         CALL PULSE_E
0153   3005           00501         MOVLW D'5'
0154   00??           00502         MOVWF DELAY_COUNTER
0155   2???           00503         CALL DELAY_MILLIS
0156   0008           00504         RETURN
                      00505 
0157                  00506 LINE2_LCD
0157   2???           00507         CALL SETHOME_LCD
0158   3028           00508         MOVLW 28H   ;SET COUNTER TO 40
0159   00??           00509         MOVWF GEN_COUNT2
015A   3010           00510         MOVLW b'00010000'   ;CURSOR LEFT COMMAND
015B   2???           00511         CALL LCD_SEND ;WRITE COMMAND TO DATA LINES
015C                  00512 CLLOOP40
015C   1185           00513         BCF PORTA,3     ;RS LINE LOW (COMMAND MODE)
015D   2???           00514         CALL PULSE_E
015E   3002           00515         MOVLW D'2'
015F   00??           00516         MOVWF DELAY_COUNTER
0160   2???           00517         CALL DELAY_MILLIS
0161   0B??           00518         DECFSZ GEN_COUNT2, F
0162   2???           00519         GOTO CLLOOP40
0163   0008           00520         RETURN
                      00521 
0164                  00522 LCD_CLEAR1
0164   2???           00523         CALL SETHOME_LCD
0165   3020           00524         MOVLW H'20' ;SPACE CHAR
0166   1585           00525         BSF PORTA,3 ;RS LINE HIGH FOR DATA
0167   2???           00526         CALL LCD_SEND   ;PUT CHAR ON THE DATA LINES
0168   3014           00527         MOVLW D'20' ;COUNT 20 SPACE CHARS
0169   00??           00528         MOVWF GEN_COUNT2
016A                  00529 LCD_CLEAR12
016A   2???           00530         CALL PULSE_E
016B   3002           00531         MOVLW D'2'
016C   00??           00532         MOVWF DELAY_COUNTER
016D   2???           00533         CALL DELAY_MILLIS
016E   0B??           00534         DECFSZ GEN_COUNT2, F
016F   2???           00535         GOTO LCD_CLEAR12
0170   2???           00536         CALL SETHOME_LCD
0171   0008           00537         RETURN
                      00538 
0172                  00539 LCD_CLEAR2
0172   2???           00540         CALL LINE2_LCD
0173   3020           00541         MOVLW H'20' ;SPACE CHAR
0174   1585           00542         BSF PORTA,3 ;RS LINE HIGH FOR DATA
0175   2???           00543         CALL LCD_SEND   ;PUT CHAR ON THE DATA LINES
0176   3014           00544         MOVLW D'20' ;COUNT 20 SPACE CHARS
0177   00??           00545         MOVWF GEN_COUNT2
0178                  00546 LCD_CLEAR22
0178   2???           00547         CALL PULSE_E
0179   3002           00548         MOVLW D'2'
017A   00??           00549         MOVWF DELAY_COUNTER
017B   2???           00550         CALL DELAY_MILLIS
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

017C   0B??           00551         DECFSZ GEN_COUNT2, F
017D   2???           00552         GOTO LCD_CLEAR22
017E   2???           00553         CALL LINE2_LCD
017F   0008           00554         RETURN
                      00555 
0180                  00556 PULSE_E
0180   1505           00557         BSF PORTA,2   ;SET E LINE HIGH
0181   0000           00558         NOP
0182   0000           00559         NOP
0183   0000           00560         NOP
0184   0000           00561         NOP
0185   0000           00562         NOP ;MODIFIED FOR 4MHZ CLOCK
0186   0000           00563         NOP
0187   0000           00564         NOP
0188   0000           00565         NOP
0189   1105           00566         BCF PORTA,2   ;SET E LINE LOW
018A   0008           00567         RETURN
                      00568 
018B                  00569 PRINT_NAME
018B   1383           00570         BCF STATUS, IRP ;SET BANK 0 AND 1
018C   30??           00571         MOVLW TAPE_NAME
018D   0084           00572         MOVWF FSR
018E   3008           00573         MOVLW D'8'  ;COUNT 8 CHARS
018F   00??           00574         MOVWF GEN_COUNT2
0190   1585           00575         BSF PORTA,3 ;RS LINE HIGH FOR DATA
0191                  00576 PN_LOOP
0191   0800           00577         MOVF INDF, W
0192   2???           00578         CALL LCD_SEND
0193   2???           00579         CALL PULSE_E
0194   3002           00580         MOVLW D'2'
0195   00??           00581         MOVWF DELAY_COUNTER
0196   2???           00582         CALL DELAY_MILLIS
0197   0A84           00583         INCF FSR, F
0198   0B??           00584         DECFSZ GEN_COUNT2, F
0199   2???           00585         GOTO PN_LOOP
019A   0008           00586         RETURN
                      00587 
019B                  00588 PRINT_STRING_LCD
019B   01??           00589     CLRF STRING_INDEX ;START WITH ZERO OFFSET
019C   1585           00590     BSF PORTA,3 ;RS LINE HIGH FOR DATA
019D                  00591 PSL2
019D   30??           00592     MOVLW HIGH HOME_STRING  ;HOME STRING IS ON A DIFFERENT PAGE
019E   008A           00593     MOVWF PCLATH
019F   2???           00594     CALL STRING_TABLE
01A0   00??           00595     MOVWF TEMP1 ;PUT THE RETURN VALUE IN TEMP TO SET CONDITION CODES
01A1   30??           00596     MOVLW HIGH MAIN
01A2   008A           00597     MOVWF PCLATH    ;SET PCLATH BACK TO PAGE 0
01A3   08??           00598     MOVF TEMP1, W
01A4   1903           00599     BTFSC STATUS,Z  ;IF ZERO
01A5   0008           00600     RETURN
01A6   2???           00601     CALL LCD_SEND   ;PUT THE CHAR
01A7   2???           00602     CALL PULSE_E
01A8   3002           00603     MOVLW D'2'
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A9   00??           00604     MOVWF DELAY_COUNTER
01AA   2???           00605     CALL DELAY_MILLIS
01AB   0A??           00606     INCF STRING_INDEX, F ;INC OFFSET
01AC   2???           00607     GOTO PSL2 ;DO IT AGAIN
                      00608 
01AD                  00609 PRINT_STRING_SERIAL
01AD   01??           00610     CLRF STRING_INDEX ;START WITH ZERO OFFSET
01AE                  00611 PSS2
01AE   30??           00612     MOVLW HIGH HOME_STRING  ;HOME STRING IS ON A DIFFERENT PAGE
01AF   008A           00613     MOVWF PCLATH
01B0   2???           00614     CALL STRING_TABLE
01B1   00??           00615     MOVWF DREG
01B2   30??           00616     MOVLW HIGH MAIN
01B3   008A           00617     MOVWF PCLATH    ;SET PCLATH BACK TO PAGE 0
01B4   08??           00618     MOVF DREG, F
01B5   1903           00619     BTFSC STATUS,Z  ;IF ZERO
01B6   0008           00620     RETURN
01B7   2???           00621     CALL UART_SEND   ;PUT THE CHAR
01B8   0A??           00622     INCF STRING_INDEX, F ;INC OFFSET
01B9   2???           00623     GOTO PSS2 ;DO IT AGAIN
                      00624 
01BA                  00625 TAPE_IN
01BA   30FF           00626     MOVLW H'FF'
01BB   00??           00627     MOVWF RAM_ADDRESS_H
01BC   00??           00628     MOVWF RAM_ADDRESS_L
01BD   1480           00629     BSF FLAG_REG,1 ;DISSABLE RESET IF TRANSMISSION FAILS
01BE   2???           00630     CALL GET_LEADER
01BF   1080           00631     BCF FLAG_REG,1 ;ENABLE RESET IF TRANSMISSION FAILS
01C0   2???           00632     CALL SAVE_FIRST_BLOCK
01C1   0F??           00633     INCFSZ RAM_ADDRESS_L, F    ;INCREMENT LOW ADDRESS
01C2   03??           00634     DECF RAM_ADDRESS_H, F
01C3   0A??           00635     INCF RAM_ADDRESS_H, F       ;IF LOW ADDRESS IS ZERO INCREMENT THE HIGH ADDRESS TOO
01C4   08??           00636     MOVF RAM_ADDRESS_H, W
01C5   00??           00637     MOVWF TAPE_SIZE_HIGH
01C6   08??           00638     MOVF RAM_ADDRESS_L, W
01C7   00??           00639     MOVWF TAPE_SIZE_LOW
01C8   01??           00640     CLRF RAM_ADDRESS_H
01C9   3003           00641     MOVLW H'03'
01CA   00??           00642     MOVWF RAM_ADDRESS_L
01CB   1383           00643     BCF STATUS, IRP ;SET BANKS 0 AND 1
01CC   30??           00644     MOVLW TAPE_NAME
01CD   0084           00645     MOVWF FSR
01CE   3008           00646     MOVLW D'08'
01CF   00??           00647     MOVWF GEN_COUNT
01D0                  00648 NAME_COPY
01D0   2???           00649     CALL RAM_READ_AUTO
01D1   08??           00650     MOVF DREG, W
01D2   0080           00651     MOVWF INDF
01D3   0A84           00652     INCF FSR, F
01D4   0B??           00653     DECFSZ GEN_COUNT, F
01D5   2???           00654     GOTO NAME_COPY
01D6   0008           00655     RETURN
                      00656 
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01D7                  00657 GET_LEADER
01D7   3080           00658     MOVLW D'128'    ;LENGTH OF LEADER
01D8   00??           00659     MOVWF GEN_COUNT2
01D9                  00660 LEADER_LOOP
01D9   2???           00661     CALL BUILD_BYTE
01DA   08??           00662     MOVF DREG,W
01DB   3A55           00663     XORLW H'55'
01DC   1D03           00664     BTFSS STATUS, Z
01DD   2???           00665     GOTO GL_FIX
01DE   0B??           00666     DECFSZ GEN_COUNT2, F
01DF   2???           00667     GOTO LEADER_LOOP
01E0   0008           00668     RETURN
01E1                  00669 GL_FIX
01E1   0B??           00670     DECFSZ GEN_COUNT2, F
01E2   2???           00671     GOTO GL_FIX2
01E3   2???           00672     GOTO BUILD_PANIC
01E4                  00673 GL_FIX2
01E4   2???           00674     CALL BUILD_ALIGN
01E5   08??           00675     MOVF DREG,W
01E6   3A55           00676     XORLW H'55'
01E7   1D03           00677     BTFSS STATUS,Z
01E8   2???           00678     GOTO BUILD_PANIC
01E9   0B??           00679     DECFSZ GEN_COUNT2, F
01EA   2???           00680     GOTO LEADER_LOOP
01EB   2???           00681     GOTO BUILD_PANIC
                      00682 
01EC                  00683 SAVE_FIRST_BLOCK
01EC   2???           00684     CALL BUILD_BYTE
01ED   1C00           00685     BTFSS DREG,0    ;CHECK IF BIT 0 IS SET (IF IT IS CLEARED THERE HAS BEEN AN ALIGNMENT ERROR)
01EE   2???           00686     GOTO BUILD_PANIC
01EF   2???           00687     CALL RAM_WRITE_AUTO ;SAVE LEADER BYTE
01F0   2???           00688     CALL BUILD_BYTE
01F1   2???           00689     CALL RAM_WRITE_AUTO ;SAVE SYNC BYTE
01F2   2???           00690     CALL BUILD_BYTE
01F3   2???           00691     CALL RAM_WRITE_AUTO ;SAVE BLOCK TYPE BYTE
01F4   2???           00692     CALL BUILD_BYTE
01F5   2???           00693     CALL RAM_WRITE_AUTO ;SAVE BLOCK LENGTH
01F6   08??           00694     MOVF DREG, W
01F7   00??           00695     MOVWF GEN_COUNT2
01F8                  00696 FIRST_BLOCK_LOOP
01F8   2???           00697     CALL BUILD_BYTE
01F9   2???           00698     CALL RAM_WRITE_AUTO
01FA   0B??           00699     DECFSZ GEN_COUNT2, F
01FB   2???           00700     GOTO FIRST_BLOCK_LOOP
01FC   2???           00701     CALL BUILD_BYTE
01FD   2???           00702     CALL RAM_WRITE_AUTO ;SAVE CHECKSUM
01FE   2???           00703     CALL BUILD_BYTE
01FF   2???           00704     CALL RAM_WRITE_AUTO ;SAVE LEADER BYTE
0200   2???           00705     CALL GET_LEADER ;GETS THE SECOND LEADER
0201                  00706 SAVE_BLOCKS
0201   2???           00707     CALL BUILD_BYTE
0202   2???           00708     CALL RAM_WRITE_AUTO ;SAVE LEADER BYTE
0203   2???           00709     CALL BUILD_BYTE
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0204   2???           00710     CALL RAM_WRITE_AUTO ;SAVE SYNC BYTE
0205   2???           00711     CALL BUILD_BYTE
0206   0F??           00712     INCFSZ DREG, W  ;CHECK IF BLOCK IS END OF FILE
0207   2???           00713     GOTO NOT_EOF_BLOCK
0208   2???           00714     CALL RAM_WRITE_AUTO ;SAVE BLOCK TYPE
0209   2???           00715     CALL BUILD_BYTE
020A   2???           00716     CALL RAM_WRITE_AUTO ;SAVE BLOCK LENGTH
020B   2???           00717     CALL BUILD_BYTE
020C   2???           00718     CALL RAM_WRITE_AUTO ;SAVE CHECKSUM
020D   2???           00719     CALL BUILD_BYTE
020E   2???           00720     CALL RAM_WRITE_AUTO ;SAVE LEADER BYTE
020F   0008           00721     RETURN
0210                  00722 NOT_EOF_BLOCK
0210   2???           00723     CALL RAM_WRITE_AUTO ;SAVE BLOCK TYPE
0211   2???           00724     CALL BUILD_BYTE
0212   2???           00725     CALL RAM_WRITE_AUTO ;SAVE LENGTH BYTE
0213   08??           00726     MOVF DREG, W
0214   00??           00727     MOVWF GEN_COUNT2 ;COPY LENGTH TO GEN_COUNT2
0215                  00728 BLOCK_DATA_LOOP
0215   2???           00729     CALL BUILD_BYTE
0216   2???           00730     CALL RAM_WRITE_AUTO
0217   0B??           00731     DECFSZ GEN_COUNT2, F
0218   2???           00732     GOTO BLOCK_DATA_LOOP
0219   2???           00733     CALL BUILD_BYTE
021A   2???           00734     CALL RAM_WRITE_AUTO ;SAVE CHECKSUM
021B   2???           00735     CALL BUILD_BYTE
021C   2???           00736     CALL RAM_WRITE_AUTO ;SAVE LEADER BYTE
021D   2???           00737     GOTO SAVE_BLOCKS
                      00738 
021E                  00739 BUILD_ALIGN ;SKIPS INITIAL WAIT IN AN ATTEMPT TO FIX ALIGNMENT. BUILD_BYTE IS THE NORMAL ENTRY POINT
021E   3008           00740     MOVLW H'08'
021F   00??           00741     MOVWF GEN_COUNT ;INITIALIZE COUNTER TO 8
0220   0806           00742     MOVF PORTB, W
0221   3A02           00743     XORLW H'02' ;INVERT TAPE BIT
0222   00??           00744     MOVWF TEMP1     ;COPY PORTB TO TEMP1
0223   2???           00745     GOTO WAIT_STOP
0224                  00746 BUILD_BYTE
0224   3008           00747     MOVLW H'08'
0225   00??           00748     MOVWF GEN_COUNT ;INITIALIZE COUNTER TO 8
0226                  00749 BUILD_LOOP
0226   0806           00750     MOVF PORTB, W
0227   00??           00751     MOVWF TEMP1     ;COPY PORTB TO TEMP1
0228   01??           00752     CLRF PULSE_LENGTH
0229   0C??           00753     RRF DREG, F
022A   1380           00754     BCF DREG, 7
022B                  00755 WAIT_START
022B   0806           00756     MOVF PORTB, W
022C   06??           00757     XORWF TEMP1, W  ;COMPARE PORTB WITH PREVIOUS STATE
022D   00??           00758     MOVWF TEMP2     ;STORE RESULT IN TEMP2
022E   1C80           00759     BTFSS TEMP2, 1
022F   2???           00760     GOTO WAIT_START ;IF STATE HAS NOT CHANGED KEEP WAITING
0230                  00761 WAIT_STOP
0230   2???           00762     CALL TAPE_DELAY
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0231   0A??           00763     INCF PULSE_LENGTH, F        ;#1
0232   08??           00764     MOVF PULSE_LENGTH, W    ;#2
0233   3C16           00765     SUBLW D'22'     ;#3
0234   1803           00766     BTFSC STATUS, C ;CHECK IF LENGTH IS GREATER THAN 22 #4
0235   2???           00767     GOTO BUILD_NO_ERROR ;IF NOT CONTINUE NORMALLY #6
0236                  00768 BUILD_ERROR
0236   1C80           00769     BTFSS FLAG_REG, 1 ;IF ERROR IS IN FIRST BYTE TRY TO RECOVER
0237   2???           00770     GOTO BUILD_PANIC   ;IF NOT RESET TO AVOID INFINITE LOOP
                      00771     ;MOVF GEN_COUNT, W
                      00772     ;SUBLW H'08'
                      00773     ;BTFSS STATUS, Z ;CHECK IF ERROR IS IN FIRST BIT
                      00774     ;GOTO BUILD_PANIC   ; IF NOT RESET TO AVOID INFINITE LOOP
0238   2???           00775     GOTO BUILD_BYTE ;IF IT IS IN FIRST BIT OF FIRST BYTE RESTART SUBROUTINE
0239                  00776 BUILD_NO_ERROR
0239   0806           00777     MOVF PORTB, W   ;#7
023A   06??           00778     XORWF TEMP1, W  ;#8
023B   00??           00779     MOVWF TEMP2     ;#9
023C   1880           00780     BTFSC TEMP2, 1  ;#10
023D   2???           00781     GOTO WAIT_STOP  ;WAIT UNTIL TAPE INPUT RETURNS TO ORIGINAL STATE #12
023E   08??           00782     MOVF PULSE_LENGTH, W
023F   3C08           00783     SUBLW D'08'
0240   1803           00784     BTFSC STATUS, C ;CHECK IF LENGTH IS LESS THAN 8
0241   2???           00785     GOTO BUILD_ERROR    ;IF IT IS GO TO LOCAL ERROR HANDLER
0242   300F           00786     MOVLW D'15'
0243   02??           00787     SUBWF PULSE_LENGTH, F   ;SUBTRACT THRESHOLD FROM PULSE LENGTH
0244   1B80           00788     BTFSC PULSE_LENGTH, 7   ;CHECK IF PULSE LENGHT IS NEGATIVE
0245   1780           00789     BSF DREG, 7             ;IF IT IS SET BIT IN DREG
0246   0B??           00790     DECFSZ GEN_COUNT, F
0247   2???           00791     GOTO BUILD_LOOP
0248   3400           00792     RETLW H'00' ;RETURN ZERO TO INDICATE SUCCESS
                      00793 
0249                  00794 BUILD_PANIC ;ENABLES THE WATCHDOG TO CAUSE A RESET
0249   1283 1703      00795     BANKSEL WDTCON
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
024B   1405           00796     BSF WDTCON, SWDTEN  ;ENABLE WATCHDOG
024C                  00797 BP_HALT
024C   2???           00798     GOTO BP_HALT    ;WAIT FOR THE WATCHDOG TO DO THE THING
                      00799 
024D                  00800 TAPE_DELAY
024D   0000           00801     NOP
024E   0000           00802     NOP
024F   0000           00803     NOP
0250   0000           00804     NOP
0251   0000           00805     NOP ;5 CYCLE DELAY
0252   0008           00806     RETURN
                      00807 
0253                  00808 TAPE_OUT
0253   01??           00809     CLRF TEMP1
0254   01??           00810     CLRF BIT_COUNT
0255   30FF           00811     MOVLW H'FF'
0256   00??           00812     MOVWF RAM_ADDRESS_H
0257   00??           00813     MOVWF RAM_ADDRESS_L ;RAM READ FUNCTION WILL AUTO INCREMENT ADDRESS, SO IT SHOULD OVERFLOW WHEN IT IS
                             FIRST CALLED
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0258   3055           00814     MOVLW H'55'
0259   00??           00815     MOVWF DREG  ;TAPE LEADER VALUE
025A   307F           00816     MOVLW D'127'
025B   00??           00817     MOVWF GEN_COUNT ;128 LEADER BYTES
025C   0181           00818     CLRF TMR0
025D   0000           00819     NOP
025E   110B           00820     BCF INTCON, T0IF
025F   178B           00821     BSF INTCON, GIE     ;ENABLE INTERRUPT
0260                  00822 LEADER_OUT
0260   1D00           00823     BTFSS BIT_COUNT, 2
0261   2???           00824     GOTO LEADER_OUT     ;WAIT UNTIL BIT COUNT IS NOT ZERO
0262                  00825 LEADER_WAIT
0262   1900           00826     BTFSC BIT_COUNT, 2
0263   2???           00827     GOTO LEADER_WAIT    ;WAIT UNTIL BIT_COUNT IS ZERO
0264   0B??           00828     DECFSZ GEN_COUNT, F
0265   2???           00829     GOTO LEADER_OUT     ;LOOP UNTIL 128 LEADER BYTES HAVE BEEN SENT
0266   3016           00830     MOVLW D'22'
0267   00??           00831     MOVWF GEN_COUNT     ;ONE PAST THE END OF THE NAME FILE
0268                  00832 TAPE_NAMEBLOCK
0268   2???           00833     CALL RAM_READ_AUTO  ;GET FIRST BYTE
0269                  00834 TAPE_W1
0269   1D00           00835     BTFSS BIT_COUNT, 2
026A   2???           00836     GOTO TAPE_W1    ;WAIT UNTIL BIT COUNT IS NOT ZERO
026B                  00837 TAPE_W2
026B   1900           00838     BTFSC BIT_COUNT, 2
026C   2???           00839     GOTO TAPE_W2
026D   0B??           00840     DECFSZ GEN_COUNT, F
026E   2???           00841     GOTO TAPE_NAMEBLOCK
026F   138B           00842     BCF INTCON, GIE ;STOP INTERRUPT
0270   2???           00843     CALL TAPE_PAUSE ;1/2 SECOND SILENCE
0271   307F           00844     MOVLW D'127'
0272   00??           00845     MOVWF GEN_COUNT ;128 LEADER BYTES
0273   0181           00846     CLRF TMR0
0274   01??           00847     CLRF TEMP1
0275   0000           00848     NOP
0276   110B           00849     BCF INTCON, T0IF
0277   178B           00850     BSF INTCON, GIE     ;ENABLE INTERRUPT
0278                  00851 LEADER_OUT2
0278   1D00           00852     BTFSS BIT_COUNT, 2
0279   2???           00853     GOTO LEADER_OUT2    ;WAIT UNTIL BIT COUNT IS NOT ZERO
027A                  00854 LEADER_WAIT2
027A   1900           00855     BTFSC BIT_COUNT, 2
027B   2???           00856     GOTO LEADER_WAIT2   ;WAIT UNTIL BIT_COUNT IS ZERO
027C   0B??           00857     DECFSZ GEN_COUNT, F
027D   2???           00858     GOTO LEADER_OUT2    ;LOOP UNTIL 128 LEADER BYTES HAVE BEEN SENT
027E                  00859 TAPE_NE
027E   2???           00860     CALL RAM_READ_AUTO
027F                  00861 TAPE_W3
027F   1D00           00862     BTFSS BIT_COUNT, 2
0280   2???           00863     GOTO TAPE_W3    ;WAIT UNTIL BIT_COUNT IS NOT ZERO
0281                  00864 TAPE_W4
0281   1900           00865     BTFSC BIT_COUNT, 2
0282   2???           00866     GOTO TAPE_W4
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0283   08??           00867     MOVF TAPE_SIZE_HIGH, W
0284   06??           00868     XORWF RAM_ADDRESS_H, W
0285   00??           00869     MOVWF TEMP3 ;STORE RESULT IN TEMP3
0286   0A??           00870     INCF TEMP3, F   ;INCREMENT RESULT
0287   0B??           00871     DECFSZ TEMP3, F
0288   2???           00872     GOTO TAPE_NE
0289   08??           00873     MOVF TAPE_SIZE_LOW, W
028A   06??           00874     XORWF RAM_ADDRESS_L, W
028B   00??           00875     MOVWF TEMP3 ;STORE RESULT IN TEMP3
028C   0A??           00876     INCF TEMP3, F
028D   0B??           00877     DECFSZ TEMP3, F
028E   2???           00878     GOTO TAPE_NE
028F   138B           00879     BCF INTCON, GIE
0290   0008           00880     RETURN
                      00881 
0291                  00882 TAPE_INT
0291   00??           00883     MOVWF TEMP4 ;SAVE W REG
0292   110B           00884     BCF INTCON, T0IF
0293   303B           00885     MOVLW D'59' ;USED TO BE 58, CHANGED IT BECAUSE I ADDED THE SAVE W INSTRUCTION
0294   0081           00886     MOVWF TMR0  ;PRELOAD TIMER
0295   1800           00887     BTFSC TEMP1, 0  ;IDENTIFY PHASE
0296   2???           00888     GOTO PHASE1
0297   1880           00889     BTFSC TEMP1, 1
0298   2???           00890     GOTO PHASE2
0299   1900           00891     BTFSC TEMP1, 2
029A   2???           00892     GOTO PHASE3
029B   1980           00893     BTFSC TEMP1, 3
029C   2???           00894     GOTO PHASE4
029D   3004           00895     MOVLW B'00000100'   ;DEFAULT PHASE - LOAD NEW DATA AND INITIALIZE VARIABLES
029E   0686           00896     XORWF PORTB, F  ;TOGGLE TAPE OUT
029F   08??           00897     MOVF DREG, W
02A0   00??           00898     MOVWF TEMP2     ;COPY NEW DATA TO BUFFER
02A1   01??           00899     CLRF BIT_COUNT
02A2   3001           00900     MOVLW H'01'
02A3   00??           00901     MOVWF TEMP1 ;SET PHASE TO 1
02A4   08??           00902     MOVF TEMP4, W   ;RESTORE W
02A5   0009           00903     RETFIE
02A6                  00904 PHASE1  ;TOGGLE IF BIT IS 1
02A6   3004           00905         MOVLW B'00000100'       ;WILL USE THIS TO TOGGLE OUTPUT
02A7   1800           00906         BTFSC TEMP2, 0  ;CHECK IF BIT IS 1 OR 0
02A8   0686           00907         XORWF PORTB, F  ;IF BIT IS 1 TOGGLE OUTPUT
02A9   3002           00908         MOVLW H'02'
02AA   00??           00909         MOVWF TEMP1     ;SET PHASE TO 2
02AB   08??           00910         MOVF TEMP4, W   ;RESTORE W
02AC   0009           00911         RETFIE
02AD                  00912 PHASE2  ;ALWAYS TOGGLE
02AD   3004           00913         MOVLW B'00000100'
02AE   0686           00914         XORWF PORTB, F  ;TOGGLE OUTPUT
02AF   1800           00915         BTFSC TEMP2, 0  ;CHECK IF BIT IS 1 OR 0
02B0   2???           00916         GOTO PHASE2_NEXT        ;IF BIT IS SET THEN LOAD NEXT BIT AND RESET PHASE
02B1   3004           00917         MOVLW H'04'
02B2   00??           00918         MOVWF TEMP1     ;SET PHASE TO 3
02B3   08??           00919         MOVF TEMP4, W   ;RESTORE W
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02B4   0009           00920         RETFIE
02B5                  00921 PHASE3  ;NEVER TOGGLE
02B5   3008           00922         MOVLW H'08'
02B6   00??           00923         MOVWF TEMP1     ;SET PHASE TO 4
02B7   08??           00924         MOVF TEMP4, W
02B8   0009           00925         RETFIE
02B9                  00926 PHASE4  ;ALWAYS TOGGLE
02B9   3004           00927         MOVLW B'00000100'
02BA   0686           00928         XORWF PORTB, F  ;TOGGLE OUTPUT
02BB                  00929 PHASE2_NEXT
02BB   3001           00930     MOVLW H'01'
02BC   00??           00931     MOVWF TEMP1 ;SET PHASE TO 1
02BD   0C??           00932     RRF TEMP2, F        ;SHIFT TO NEXT BIT
02BE   0A??           00933     INCF BIT_COUNT, F   ;NEXT BIT COUNT
02BF   1D80           00934     BTFSS BIT_COUNT, 3  ;CHECK IF BIT COUNT HAS REACHED 8
02C0   2???           00935     GOTO PHASE_DONE     ;IF NOT, RETURN
02C1   01??           00936     CLRF BIT_COUNT      ;CLEAR BIT COUNT
02C2   08??           00937     MOVF DREG, W
02C3   00??           00938     MOVWF TEMP2 ;COPY NEW DATA TO BUFFER
02C4                  00939 PHASE_DONE
02C4   08??           00940     MOVF TEMP4, W
02C5   0009           00941     RETFIE
                      00942 
02C6                  00943 TAPE_PAUSE
02C6   3020           00944     MOVLW D'32'
02C7   00??           00945     MOVWF GEN_COUNT
02C8                  00946 TP1
02C8   3036           00947     MOVLW D'54'
02C9   00??           00948     MOVWF GEN_COUNT2
02CA                  00949 TP2
02CA   305F           00950     MOVLW D'95'
02CB   00??           00951     MOVWF LDEL_COUNT
02CC                  00952 TP3
02CC   0B??           00953     DECFSZ LDEL_COUNT, F
02CD   2???           00954     GOTO TP3
02CE   0B??           00955     DECFSZ GEN_COUNT2, F
02CF   2???           00956     GOTO TP2
02D0   0B??           00957     DECFSZ GEN_COUNT, F
02D1   2???           00958     GOTO TP1
02D2   0008           00959     RETURN
                      00960 
02D3                  00961 SPI_TRANSFER
02D3   08??           00962     MOVF DREG,W
02D4   0093           00963     MOVWF SSPBUF    ;SEND DATA
02D5   1683 1303      00964     BANKSEL SSPSTAT
02D7                  00965 SPI_WAIT
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
02D7   1C14           00966     BTFSS SSPSTAT, BF   ;IS THE TRANSMISSION READY
02D8   2???           00967     GOTO SPI_WAIT       ;IF NOT WAIT UNTIL IT IS
02D9   1283 1303      00968     BANKSEL SSPBUF
02DB   0813           00969     MOVF SSPBUF, W  ;COPY DATA TO W
02DC   00??           00970     MOVWF DREG  ;PUT DATA IN DREG
02DD   0008           00971     RETURN
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00972 
02DE                  00973 BYTE_TO_HEX
02DE   ????           00974     PAGESEL HOME_STRING
02DF   08??           00975     MOVF DREG,W
02E0   390F           00976     ANDLW H'0F'
02E1   2???           00977     CALL HEX_STRING
02E2   00??           00978     MOVWF HEX_CHAR_LOW
02E3   0E??           00979     SWAPF DREG,W
02E4   390F           00980     ANDLW H'0F'
02E5   2???           00981     CALL HEX_STRING
02E6   00??           00982     MOVWF HEX_CHAR_HIGH
02E7   ????           00983     PAGESEL INITIALIZE
02E8   0008           00984     RETURN
                      00985 
02E9                  00986 BUILD_WORD  ;GENERATES PSEUDO-RANDOM TEST DATA
02E9   3010           00987     MOVLW D'16'
02EA   00??           00988     MOVWF GEN_COUNT4
02EB                  00989 BUILD_WORD_LOOP
                      00990     ;GET WORD HERE
02EB   01??           00991     CLRF TEMP3  ;THIS WILL CONTAIN BIT 7 OF S_REG_LOW
02EC   1B80           00992     BTFSC S_REG_LOW,7
02ED   1400           00993     BSF TEMP3,0
02EE   08??           00994     MOVF S_REG_LOW,W
02EF   3901           00995     ANDLW H'01'     ;GET BIT 0
02F0   06??           00996     XORWF TEMP3,F   ;TEMP3 NOW CONTAINS BIT0 AND BIT7 XORED TOGETHER
02F1   0C??           00997     RRF TEMP3,F
02F2   0C??           00998     RRF S_REG_HIGH,F
02F3   0C??           00999     RRF S_REG_LOW, F
02F4   0B??           01000     DECFSZ GEN_COUNT4,F
02F5   2???           01001     GOTO BUILD_WORD_LOOP
02F6   0008           01002     RETURN
                      01003 
02F7                  01004 GET_TEST_BYTE   ;SPLITS PSEUDO-RANDOM TEST DATA INTO SINGLE BYTES
02F7   1C00           01005     BTFSS FLAG_REG,0
02F8   2???           01006     GOTO GTB_UPDATE
02F9   08??           01007     MOVF S_REG_LOW,W
02FA   00??           01008     MOVWF DREG
02FB   1000           01009     BCF FLAG_REG,0
02FC   0008           01010     RETURN
02FD                  01011 GTB_UPDATE
02FD   2???           01012     CALL BUILD_WORD
02FE   1400           01013     BSF FLAG_REG,0
02FF   08??           01014     MOVF S_REG_HIGH,W
0300   00??           01015     MOVWF DREG
0301   0008           01016     RETURN
                      01017 
0302                  01018 DELAY_MILLIS    ;DESIGNED FOR 4MHZ CLOCK
0302   3014           01019     MOVLW D'20'
0303   00??           01020     MOVWF LDEL_COUNT
0304                  01021 DM_OUTER
0304   3010           01022     MOVLW D'16'
0305   00??           01023     MOVWF SDEL_COUNT
0306                  01024 DM_INNER
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0306   0B??           01025     DECFSZ SDEL_COUNT,F
0307   2???           01026     GOTO DM_INNER
0308   0B??           01027     DECFSZ LDEL_COUNT,F
0309   2???           01028     GOTO DM_OUTER
030A   0B??           01029     DECFSZ DELAY_COUNTER,F
030B   2???           01030     GOTO DELAY_MILLIS
030C   0008           01031     RETURN
                      01032 
030D                  01033 PRINT_TEST_DATA
030D   01??           01034     CLRF GEN_COUNT
030E                  01035 PTD_OUTER
030E   01??           01036     CLRF GEN_COUNT2
030F                  01037 PTD_INNER
030F   08??           01038     MOVF GEN_COUNT2,W
0310   390F           01039     ANDLW H'0F'
0311   1D03           01040     BTFSS STATUS,Z  ;EVERY 16 WORDS PRINT A NEWLINE
0312   2???           01041     GOTO PTD_NO_NEWLINE
0313   300A           01042     MOVLW H'0A' ;NEWLINE CHAR
0314   00??           01043     MOVWF DREG
0315   2???           01044     CALL UART_SEND
0316                  01045 PTD_NO_NEWLINE
0316   2???           01046     CALL GET_TEST_BYTE  ;GET MSB
0317   2???           01047     CALL BYTE_TO_HEX
0318   08??           01048     MOVF HEX_CHAR_HIGH,W
0319   00??           01049     MOVWF DREG
031A   2???           01050     CALL UART_SEND  ;HIGH NIBBLE HIGH BYTE
031B   08??           01051     MOVF HEX_CHAR_LOW,W
031C   00??           01052     MOVWF DREG
031D   2???           01053     CALL UART_SEND  ;LOW NIBBLE HIGH BYTE
031E   2???           01054     CALL GET_TEST_BYTE  ;GET LSB
031F   2???           01055     CALL BYTE_TO_HEX
0320   08??           01056     MOVF HEX_CHAR_HIGH,W
0321   00??           01057     MOVWF DREG
0322   2???           01058     CALL UART_SEND  ;HIGH NIBBLE LOW BYTE
0323   08??           01059     MOVF HEX_CHAR_LOW,W
0324   00??           01060     MOVWF DREG
0325   2???           01061     CALL UART_SEND  ;LOW NIBBLE LOW BYTE
0326   0B??           01062     DECFSZ GEN_COUNT2,F
0327   2???           01063     GOTO PTD_INNER
0328   0B??           01064     DECFSZ GEN_COUNT,F
0329   2???           01065     GOTO PTD_OUTER
032A   0008           01066     RETURN
                      01067 
032B                  01068 CHECK_FREE_SPACE
032B   1180           01069     BCF FLAG_REG, 3
032C   1200           01070     BCF FLAG_REG, 4
032D   08??           01071     MOVF USB_FREE_SPACE3, F
032E   1D03           01072     BTFSS STATUS, Z
032F   2???           01073     GOTO CFS2
0330   1580           01074     BSF FLAG_REG, 3
0331   1600           01075     BSF FLAG_REG, 4
0332   0008           01076     RETURN
0333                  01077 CFS2
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0333   08??           01078     MOVF USB_FREE_SPACE2, W
0334   3C02           01079     SUBLW H'02'
0335   1C03           01080     BTFSS STATUS, C
0336   2???           01081     GOTO CFS3
0337   1580           01082     BSF FLAG_REG, 3
0338   1600           01083     BSF FLAG_REG, 4
0339   0008           01084     RETURN
033A                  01085 CFS3
033A   08??           01086     MOVF USB_FREE_SPACE1, W
033B   06??           01087     XORWF TAPE_SIZE_HIGH, W
033C   1903           01088     BTFSC STATUS, Z
033D   2???           01089     GOTO CFS4
033E   08??           01090     MOVF TAPE_SIZE_HIGH, W
033F   02??           01091     SUBWF USB_FREE_SPACE1, W
0340   1803           01092     BTFSC STATUS, C
0341   1580           01093     BSF FLAG_REG, 3
0342   0008           01094     RETURN
0343                  01095 CFS4
0343   08??           01096     MOVF TAPE_SIZE_LOW, F
0344   1903           01097     BTFSC STATUS, Z
0345   1580           01098     BSF FLAG_REG, 3
0346   0008           01099     RETURN
                      01100 
0347                  01101 USB_RESET_ALL
0347   1108           01102     BCF PORTD,2 ;CH376 CE LINE LOW
0348   3005           01103     MOVLW H'05' ;RESET ALL COMMAND
0349   00??           01104     MOVWF DREG
034A   2???           01105     CALL SPI_TRANSFER
034B   1508           01106     BSF PORTD,2 ;CH376S CE LINE HIGH
034C   0008           01107     RETURN
                      01108 
034D                  01109 USB_SET_FILE_NAME
034D   1383           01110     BCF STATUS, IRP
034E   30??           01111     MOVLW TAPE_NAME ;NAME ADDRESS
034F   0084           01112     MOVWF FSR
0350   3008           01113     MOVLW H'08' ;NAME LENGTH
0351   00??           01114     MOVWF GEN_COUNT4
0352   1108           01115     BCF PORTD,2
0353   302F           01116     MOVLW H'2F' ;SET FILE NAME COMMAND
0354   00??           01117     MOVWF DREG
0355   2???           01118     CALL SPI_TRANSFER
0356   302F           01119     MOVLW H'2F' ;'\' CHAR NEEDED AT START OF NAME
0357   00??           01120     MOVWF DREG
0358   2???           01121     CALL SPI_TRANSFER
0359                  01122 USFN_LOOP
0359   0800           01123     MOVF INDF,W
035A   00??           01124     MOVWF DREG
035B   2???           01125     CALL SPI_TRANSFER
035C   0A84           01126     INCF FSR, F
035D   0B??           01127     DECFSZ GEN_COUNT4,F
035E   2???           01128     GOTO USFN_LOOP
035F   01??           01129     CLRF DREG   ;NULL CHAR AT END OF NAME
0360   2???           01130     CALL SPI_TRANSFER
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0361   1508           01131     BSF PORTD,2 ;CE LINE HIGH
0362   0008           01132     RETURN
                      01133 
0363                  01134 USB_FILE_OPEN
0363   1108           01135     BCF PORTD,2
0364   3032           01136     MOVLW H'32' ;FILE OPEN COMMAND
0365   00??           01137     MOVWF DREG
0366   2???           01138     CALL SPI_TRANSFER
0367   1508           01139     BSF PORTD,2
0368   0008           01140     RETURN
                      01141 
0369                  01142 USB_FILE_CLOSE
0369   1108           01143     BCF PORTD,2
036A   3036           01144     MOVLW H'36' ;FILE CLOSE COMMAND
036B   00??           01145     MOVWF DREG
036C   2???           01146     CALL SPI_TRANSFER
036D   3001           01147     MOVLW H'01' ;UPDATE FILE LENGTH
036E   00??           01148     MOVWF DREG
036F   2???           01149     CALL SPI_TRANSFER
0370   1508           01150     BSF PORTD,2
0371   0008           01151     RETURN
                      01152 
0372                  01153 USB_BYTE_READ
0372   1108           01154     BCF PORTD,2
0373   303A           01155     MOVLW H'3A' ;BYTE READ COMMAND
0374   00??           01156     MOVWF DREG
0375   2???           01157     CALL SPI_TRANSFER
0376   08??           01158     MOVF USB_FILE_SIZE_LOW,W
0377   00??           01159     MOVWF DREG
0378   2???           01160     CALL SPI_TRANSFER
0379   08??           01161     MOVF USB_FILE_SIZE_HIGH,W
037A   00??           01162     MOVWF DREG
037B   2???           01163     CALL SPI_TRANSFER
037C   1508           01164     BSF PORTD,2
037D   0008           01165     RETURN
                      01166 
037E                  01167 USB_BYTE_READ_GO
037E   1108           01168     BCF PORTD,2
037F   303B           01169     MOVLW H'3B' ;BYTE READ GO COMMAND
0380   00??           01170     MOVWF DREG
0381   2???           01171     CALL SPI_TRANSFER
0382   1508           01172     BSF PORTD,2
0383   0008           01173     RETURN
                      01174 
0384                  01175 USB_READ_DATA0
0384   1108           01176     BCF PORTD,2
0385   3027           01177     MOVLW H'27' ;READ DATA0 COMMAND
0386   00??           01178     MOVWF DREG
0387   2???           01179     CALL SPI_TRANSFER
0388   01??           01180     CLRF DREG
0389   2???           01181     CALL SPI_TRANSFER   ;GET NUMBER OF BYTES TO READ
038A   08??           01182     MOVF DREG,W
038B   07??           01183     ADDWF USB_BYTES_READ_LOW, F
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

038C   1803           01184     BTFSC STATUS, C
038D   0A??           01185     INCF USB_BYTES_READ_HIGH, F
038E   00??           01186     MOVWF GEN_COUNT4
038F                  01187 URD_LOOP
038F   01??           01188     CLRF DREG
0390   2???           01189     CALL SPI_TRANSFER
0391   2???           01190     CALL RAM_WRITE_AUTO
0392   0B??           01191     DECFSZ GEN_COUNT4,F
0393   2???           01192     GOTO URD_LOOP
0394   1508           01193     BSF PORTD,2
0395   0008           01194     RETURN
                      01195 
0396                  01196 USB_GET_FILE_SIZE
0396   1108           01197     BCF PORTD,2
0397   300C           01198     MOVLW H'0C' ;GET FILE SIZE COMMAND
0398   00??           01199     MOVWF DREG
0399   2???           01200     CALL SPI_TRANSFER
039A   3068           01201     MOVLW H'68' ;COMMAND DATA
039B   00??           01202     MOVWF DREG
039C   2???           01203     CALL SPI_TRANSFER
039D   01??           01204     CLRF DREG
039E   2???           01205     CALL SPI_TRANSFER
039F   08??           01206     MOVF DREG,W
03A0   00??           01207     MOVWF USB_FILE_SIZE_LOW
03A1   01??           01208     CLRF DREG
03A2   2???           01209     CALL SPI_TRANSFER
03A3   08??           01210     MOVF DREG,W
03A4   00??           01211     MOVWF USB_FILE_SIZE_HIGH
03A5   01??           01212     CLRF DREG
03A6   2???           01213     CALL SPI_TRANSFER
03A7   01??           01214     CLRF DREG
03A8   2???           01215     CALL SPI_TRANSFER   ;DISCARD UPPER BYTES OF FILE SIZE
03A9   1508           01216     BSF PORTD,2
03AA   0008           01217     RETURN
                      01218 
03AB                  01219 USB_CHECK_EXISTS
03AB   1108           01220     BCF PORTD,2
03AC   08??           01221     MOVF DREG,W
03AD   00??           01222     MOVWF TEMP4
03AE   3006           01223     MOVLW H'06'
03AF   00??           01224     MOVWF DREG
03B0   2???           01225     CALL SPI_TRANSFER   ;SEND CHECK_EXISTS COMMAND
03B1   08??           01226     MOVF TEMP4,W
03B2   00??           01227     MOVWF DREG
03B3   2???           01228     CALL SPI_TRANSFER   ;SEND TEST DATA
03B4   01??           01229     CLRF DREG
03B5   2???           01230     CALL SPI_TRANSFER   ;GET RESULT
03B6   1508           01231     BSF PORTD,2
03B7   0008           01232     RETURN
                      01233 
03B8                  01234 USB_FILE_CREATE
03B8   1108           01235     BCF PORTD,2
03B9   3034           01236     MOVLW H'34'
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03BA   00??           01237     MOVWF DREG
03BB   2???           01238     CALL SPI_TRANSFER
03BC   1508           01239     BSF PORTD,2
03BD   0008           01240     RETURN
                      01241 
03BE                  01242 USB_BYTE_WRITE
03BE   1108           01243     BCF PORTD,2
03BF   303C           01244     MOVLW H'3C'
03C0   00??           01245     MOVWF DREG
03C1   2???           01246     CALL SPI_TRANSFER
03C2   08??           01247     MOVF USB_FILE_SIZE_LOW, W
03C3   00??           01248     MOVWF DREG
03C4   2???           01249     CALL SPI_TRANSFER
03C5   08??           01250     MOVF USB_FILE_SIZE_HIGH, W
03C6   00??           01251     MOVWF DREG
03C7   2???           01252     CALL SPI_TRANSFER
03C8   1508           01253     BSF PORTD,2
03C9   0008           01254     RETURN
                      01255 
03CA                  01256 USB_BYTE_WR_GO
03CA   1108           01257     BCF PORTD,2
03CB   303D           01258     MOVLW H'3D'
03CC   00??           01259     MOVWF DREG
03CD   2???           01260     CALL SPI_TRANSFER
03CE   1508           01261     BSF PORTD,2
03CF   0008           01262     RETURN
                      01263 
03D0                  01264 USB_GET_STATUS
03D0   1108           01265     BCF PORTD,2
03D1   3022           01266     MOVLW H'22'
03D2   00??           01267     MOVWF DREG
03D3   2???           01268     CALL SPI_TRANSFER
03D4   01??           01269     CLRF DREG
03D5   2???           01270     CALL SPI_TRANSFER
03D6   1508           01271     BSF PORTD,2
03D7   0008           01272     RETURN
                      01273 
03D8                  01274 USB_DISK_MOUNT
03D8   1108           01275     BCF PORTD,2
03D9   3031           01276     MOVLW H'31'
03DA   00??           01277     MOVWF DREG
03DB   2???           01278     CALL SPI_TRANSFER
03DC   1508           01279     BSF PORTD,2
03DD   0008           01280     RETURN
                      01281 
03DE                  01282 USB_DISK_CONNECT
03DE   1108           01283     BCF PORTD,2
03DF   3030           01284     MOVLW H'30'
03E0   00??           01285     MOVWF DREG
03E1   2???           01286     CALL SPI_TRANSFER
03E2   1508           01287     BSF PORTD,2
03E3   0008           01288     RETURN
                      01289 
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03E4                  01290 USB_SET_MODE_5
03E4   1108           01291     BCF PORTD,2
03E5   3015           01292     MOVLW H'15'
03E6   00??           01293     MOVWF DREG
03E7   2???           01294     CALL SPI_TRANSFER
03E8   3005           01295     MOVLW H'05'
03E9   00??           01296     MOVWF DREG
03EA   2???           01297     CALL SPI_TRANSFER
03EB   1508           01298     BSF PORTD,2
03EC   0008           01299     RETURN
                      01300 
03ED                  01301 USB_SET_MODE_6
03ED   1108           01302     BCF PORTD,2
03EE   3015           01303     MOVLW H'15'
03EF   00??           01304     MOVWF DREG
03F0   2???           01305     CALL SPI_TRANSFER
03F1   3006           01306     MOVLW H'06'
03F2   00??           01307     MOVWF DREG
03F3   2???           01308     CALL SPI_TRANSFER
03F4   1508           01309     BSF PORTD,2
03F5   0008           01310     RETURN
                      01311 
03F6                  01312 USB_SET_MODE_7
03F6   1108           01313     BCF PORTD,2
03F7   3015           01314     MOVLW H'15'
03F8   00??           01315     MOVWF DREG
03F9   2???           01316     CALL SPI_TRANSFER
03FA   3007           01317     MOVLW H'07'
03FB   00??           01318     MOVWF DREG
03FC   2???           01319     CALL SPI_TRANSFER
03FD   1508           01320     BSF PORTD,2
03FE   0008           01321     RETURN
                      01322 
03FF                  01323 USB_GET_VERSION
03FF   1108           01324     BCF PORTD,2
0400   3001           01325     MOVLW H'01'
0401   00??           01326     MOVWF DREG
0402   2???           01327     CALL SPI_TRANSFER
0403   01??           01328     CLRF DREG
0404   2???           01329     CALL SPI_TRANSFER
0405   1508           01330     BSF PORTD,2
0406   0008           01331     RETURN
                      01332 
0407                  01333 USB_WAIT_STATUS
0407   0A??           01334     INCF TIMEOUT_HIGH, F
0408   0A??           01335     INCF TIMEOUT_LOW, F
0409                  01336 UWS_LOOP
0409   3001           01337     MOVLW H'01'
040A   00??           01338     MOVWF DELAY_COUNTER
040B   2???           01339     CALL DELAY_MILLIS   ;DELAY 1 MILLISECOND
040C   2???           01340     CALL USB_GET_STATUS
040D   08??           01341     MOVF USB_TARGET_STATUS, W
040E   06??           01342     XORWF DREG, F
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

040F   1903           01343     BTFSC STATUS, Z
0410   0008           01344     RETURN
0411   0B??           01345     DECFSZ TIMEOUT_LOW, F
0412   2???           01346     GOTO UWS_LOOP
0413   0B??           01347     DECFSZ TIMEOUT_HIGH, F
0414   2???           01348     GOTO UWS_LOOP
0415   1500           01349     BSF FLAG_REG, 2    ;SET FLAG TO INDICATE A TIMEOUT
0416   0008           01350     RETURN
                      01351 
0417                  01352 USB_DISK_CAPACITY
0417   1108           01353     BCF PORTD,2
0418   303E           01354     MOVLW H'3E'
0419   00??           01355     MOVWF DREG
041A   2???           01356     CALL SPI_TRANSFER   ;SEND DISK CAPACITY COMMAND
041B   1508           01357     BSF PORTD,2
041C   3014           01358     MOVLW H'14'
041D   00??           01359     MOVWF USB_TARGET_STATUS ;SET TARGET STATUS TO 14 (DEVICE READY)
041E   01??           01360     CLRF TIMEOUT_HIGH
041F   3010           01361     MOVLW H'10'
0420   00??           01362     MOVWF TIMEOUT_LOW   ;SET TIMEOUT TO 16 MILLISECONDS
0421   2???           01363     CALL USB_WAIT_STATUS
0422   1108           01364     BCF PORTD,2
0423   3027           01365     MOVLW H'27'
0424   00??           01366     MOVWF DREG
0425   2???           01367     CALL SPI_TRANSFER   ;SEND READ DATA0 COMMAND
0426   01??           01368     CLRF DREG
0427   2???           01369     CALL SPI_TRANSFER   ;GET NUMBER OF BYTES TO READ (ALWAYS 4)
0428   01??           01370     CLRF DREG
0429   2???           01371     CALL SPI_TRANSFER   ;GET LSB OF DISK SIZE
                      01372 ;THE DISK SIZE IS GIVEN IN SECTORS, SO TO GET THE NUMBER OF BYTES WE MULTIPLY BY 512 WHICH IS THE SAME A
                            S SHIFTING BY 9
                      01373 ;THIS MEANS THE LSB IS ALWAYS ZERO AND THERE IS NO NEED TO HAVE A REGISTER FOR IT.
                      01374 ;INSTEAD WE PUT THE LSB IN USB_DRIVE_SIZE1 WHICH CORRESPONDS TO SHIFTING BY 8.
042A   08??           01375     MOVF DREG, W
042B   00??           01376     MOVWF USB_DRIVE_SIZE1
042C   01??           01377     CLRF DREG
042D   2???           01378     CALL SPI_TRANSFER
042E   08??           01379     MOVF DREG, W
042F   00??           01380     MOVWF USB_DRIVE_SIZE2
0430   01??           01381     CLRF DREG
0431   2???           01382     CALL SPI_TRANSFER
0432   08??           01383     MOVF DREG, W
0433   00??           01384     MOVWF USB_DRIVE_SIZE3
0434   01??           01385     CLRF DREG
0435   2???           01386     CALL SPI_TRANSFER
0436   1508           01387     BSF PORTD,2
0437   1003           01388     BCF STATUS, C   ;CLEAR CARRY FLAG
0438   0D??           01389     RLF USB_DRIVE_SIZE1, F
0439   0D??           01390     RLF USB_DRIVE_SIZE2, F
043A   0D??           01391     RLF USB_DRIVE_SIZE3, F
043B   0008           01392     RETURN
                      01393 
043C                  01394 USB_DISK_QUERY
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

043C   1108           01395     BCF PORTD,2
043D   303E           01396     MOVLW H'3E'
043E   00??           01397     MOVWF DREG
043F   2???           01398     CALL SPI_TRANSFER   ;SEND DISK CAPACITY COMMAND
0440   1508           01399     BSF PORTD,2
0441   3014           01400     MOVLW H'14'
0442   00??           01401     MOVWF USB_TARGET_STATUS ;SET TARGET STATUS TO 14 (DEVICE READY)
0443   01??           01402     CLRF TIMEOUT_HIGH
0444   3010           01403     MOVLW H'10'
0445   00??           01404     MOVWF TIMEOUT_LOW   ;SET TIMEOUT TO 16 MILLISECONDS
0446   2???           01405     CALL USB_WAIT_STATUS
0447   1108           01406     BCF PORTD,2
0448   3027           01407     MOVLW H'27'
0449   00??           01408     MOVWF DREG
044A   2???           01409     CALL SPI_TRANSFER   ;SEND READ DATA0 COMMAND
044B   01??           01410     CLRF DREG
044C   2???           01411     CALL SPI_TRANSFER   ;GET NUMBER OF BYTES TO READ (ALWAYS 8)
044D   01??           01412     CLRF DREG
044E   2???           01413     CALL SPI_TRANSFER   ;GET LSB OF LOGICAL BYTES
044F   08??           01414     MOVF DREG, W
0450   00??           01415     MOVWF USB_LOGICAL_BYTES1
0451   01??           01416     CLRF DREG
0452   2???           01417     CALL SPI_TRANSFER
0453   08??           01418     MOVF DREG, W
0454   00??           01419     MOVWF USB_LOGICAL_BYTES2
0455   01??           01420     CLRF DREG
0456   2???           01421     CALL SPI_TRANSFER
0457   08??           01422     MOVF DREG, W
0458   00??           01423     MOVWF USB_LOGICAL_BYTES3
0459   01??           01424     CLRF DREG
045A   2???           01425     CALL SPI_TRANSFER   ;DISCARD MSB OF LOGICAL BYTES
045B   01??           01426     CLRF DREG
045C   2???           01427     CALL SPI_TRANSFER   ;GET LSB OF FREE SPACE
045D   08??           01428     MOVF DREG, W
045E   00??           01429     MOVWF USB_FREE_SPACE1
045F   01??           01430     CLRF DREG
0460   2???           01431     CALL SPI_TRANSFER
0461   08??           01432     MOVF DREG, W
0462   00??           01433     MOVWF USB_FREE_SPACE2
0463   01??           01434     CLRF DREG
0464   2???           01435     CALL SPI_TRANSFER
0465   08??           01436     MOVF DREG, W
0466   00??           01437     MOVWF USB_FREE_SPACE3
0467   01??           01438     CLRF DREG
0468   2???           01439     CALL SPI_TRANSFER   ;DISCARD MSB OF FREE SPACE
0469   1508           01440     BSF PORTD,2
046A   1003           01441     BCF STATUS, C
046B   0D??           01442     RLF USB_LOGICAL_BYTES1, F
046C   0D??           01443     RLF USB_LOGICAL_BYTES2, F
046D   0D??           01444     RLF USB_LOGICAL_BYTES3, F
046E   1003           01445     BCF STATUS, C
046F   0D??           01446     RLF USB_FREE_SPACE1, F
0470   0D??           01447     RLF USB_FREE_SPACE2, F
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0471   0D??           01448     RLF USB_FREE_SPACE3, F
0472   0008           01449     RETURN
                      01450 
0473                  01451 USB_WRITE_TEST_DATA
0473   01??           01452     CLRF S_REG_LOW
0474   01??           01453     CLRF S_REG_HIGH
0475   1000           01454     BCF FLAG_REG, 0 ;INITIALIZE PSUEDO-RANDOM DATA GENERATOR
0476   2???           01455     CALL USB_FILE_CREATE
0477   30B8           01456     MOVLW H'B8'
0478   00??           01457     MOVWF TIMEOUT_LOW
0479   300B           01458     MOVLW H'0B'
047A   00??           01459     MOVWF TIMEOUT_HIGH  ;SET TIMEOUT TO 3 SECONDS
047B   3014           01460     MOVLW H'14'
047C   00??           01461     MOVWF USB_TARGET_STATUS ;SET TARGET STATUS TO 0x14
047D   2???           01462     CALL USB_WAIT_STATUS
047E   3004           01463     MOVLW H'04'
047F   00??           01464     MOVWF GEN_COUNT6
0480                  01465 UWTD_L4
0480   01??           01466     CLRF USB_BYTES_SENT_HIGH
0481   01??           01467     CLRF USB_BYTES_SENT_LOW
0482   3080           01468     MOVLW H'80'
0483   00??           01469     MOVWF USB_FILE_SIZE_HIGH
0484   01??           01470     CLRF USB_FILE_SIZE_LOW
0485   2???           01471     CALL USB_BYTE_WRITE
0486   300B           01472     MOVLW H'0B'
0487   00??           01473     MOVWF TIMEOUT_HIGH
0488   30B8           01474     MOVLW H'B8'
0489   00??           01475     MOVWF TIMEOUT_LOW
048A   301E           01476     MOVLW H'1E'
048B   00??           01477     MOVWF USB_TARGET_STATUS
048C   2???           01478     CALL USB_WAIT_STATUS
048D                  01479 UWTD_ND_LOOP
048D   1108           01480     BCF PORTD,2
048E   302D           01481     MOVLW H'2D'
048F   00??           01482     MOVWF DREG
0490   2???           01483     CALL SPI_TRANSFER   ;SEND WR_REQ_DATA
0491   01??           01484     CLRF DREG
0492   2???           01485     CALL SPI_TRANSFER   ;GET NUMBER OF BYTES TO SEND
0493   08??           01486     MOVF DREG, W
0494   00??           01487     MOVWF GEN_COUNT5
0495                  01488 UWTD_WR_LOOP
0495   2???           01489     CALL GET_TEST_BYTE
0496   2???           01490     CALL SPI_TRANSFER
0497   0F??           01491     INCFSZ USB_BYTES_SENT_LOW, F
0498   03??           01492     DECF USB_BYTES_SENT_HIGH, F
0499   0A??           01493     INCF USB_BYTES_SENT_HIGH, F
049A   08??           01494     MOVF USB_BYTES_SENT_HIGH, W
049B   06??           01495     XORWF USB_FILE_SIZE_HIGH, W
049C   1D03           01496     BTFSS STATUS, Z
049D   2???           01497     GOTO UWTD_NB
049E   08??           01498     MOVF USB_BYTES_SENT_LOW, W
049F   06??           01499     XORWF USB_FILE_SIZE_LOW, W
04A0   1903           01500     BTFSC STATUS, Z
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

04A1   2???           01501     GOTO UWTD_BREAK
04A2                  01502 UWTD_NB
04A2   0B??           01503     DECFSZ GEN_COUNT5, F
04A3   2???           01504     GOTO UWTD_WR_LOOP
04A4                  01505 UWTD_BREAK
04A4   1508           01506     BSF PORTD,2
04A5   300B           01507     MOVLW H'0B'
04A6   00??           01508     MOVWF TIMEOUT_HIGH
04A7   30B8           01509     MOVLW H'B8'
04A8   00??           01510     MOVWF TIMEOUT_LOW
04A9   301E           01511     MOVLW H'1E'
04AA   00??           01512     MOVWF USB_TARGET_STATUS
04AB   2???           01513     CALL USB_WAIT_STATUS
04AC   08??           01514     MOVF USB_BYTES_SENT_HIGH, W
04AD   06??           01515     XORWF USB_FILE_SIZE_HIGH, W
04AE   1D03           01516     BTFSS STATUS, Z
04AF   2???           01517     GOTO UWTD_NE
04B0   08??           01518     MOVF USB_BYTES_SENT_LOW, W
04B1   06??           01519     XORWF USB_FILE_SIZE_LOW, W
04B2   1903           01520     BTFSC STATUS, Z
04B3   2???           01521     GOTO UWTD_EQUAL
04B4                  01522 UWTD_NE
04B4   2???           01523     CALL USB_BYTE_WR_GO
04B5   300B           01524     MOVLW H'0B'
04B6   00??           01525     MOVWF TIMEOUT_HIGH
04B7   30B8           01526     MOVLW H'B8'
04B8   00??           01527     MOVWF TIMEOUT_LOW
04B9   301E           01528     MOVLW H'1E'
04BA   00??           01529     MOVWF USB_TARGET_STATUS
04BB   2???           01530     CALL USB_WAIT_STATUS
04BC   2???           01531     GOTO UWTD_ND_LOOP
04BD                  01532 UWTD_EQUAL
04BD   2???           01533     CALL USB_BYTE_WR_GO
04BE   300B           01534     MOVLW H'0B'
04BF   00??           01535     MOVWF TIMEOUT_HIGH
04C0   30B8           01536     MOVLW H'B8'
04C1   00??           01537     MOVWF TIMEOUT_LOW
04C2   3014           01538     MOVLW H'14'
04C3   00??           01539     MOVWF USB_TARGET_STATUS
04C4   2???           01540     CALL USB_WAIT_STATUS
04C5   0B??           01541     DECFSZ GEN_COUNT6, F
04C6   2???           01542     GOTO UWTD_L4
04C7   2???           01543     CALL USB_FILE_CLOSE
04C8   300B           01544     MOVLW H'0B'
04C9   00??           01545     MOVWF TIMEOUT_HIGH
04CA   30B8           01546     MOVLW H'B8'
04CB   00??           01547     MOVWF TIMEOUT_LOW
04CC   3014           01548     MOVLW H'14'
04CD   00??           01549     MOVWF USB_TARGET_STATUS
04CE   2???           01550     CALL USB_WAIT_STATUS
04CF   0008           01551     RETURN
                      01552 
04D0                  01553 USB_FILE_WRITE
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

04D0   2???           01554     CALL USB_SET_FILE_NAME
04D1   3010           01555     MOVLW H'10'
04D2   00??           01556     MOVWF TIMEOUT_LOW
04D3   01??           01557     CLRF TIMEOUT_HIGH
04D4   3014           01558     MOVLW H'14'
04D5   00??           01559     MOVWF USB_TARGET_STATUS
04D6   2???           01560     CALL USB_WAIT_STATUS
04D7   2???           01561     CALL USB_FILE_CREATE
04D8   30B8           01562     MOVLW H'B8'
04D9   00??           01563     MOVWF TIMEOUT_LOW
04DA   300B           01564     MOVLW H'0B'
04DB   00??           01565     MOVWF TIMEOUT_HIGH  ;SET TIMEOUT TO 3 SECONDS
04DC   3014           01566     MOVLW H'14'
04DD   00??           01567     MOVWF USB_TARGET_STATUS ;SET TARGET STATUS TO 0x14
04DE   2???           01568     CALL USB_WAIT_STATUS
04DF   01??           01569     CLRF USB_BYTES_SENT_HIGH
04E0   01??           01570     CLRF USB_BYTES_SENT_LOW
04E1   08??           01571     MOVF TAPE_SIZE_HIGH, W
04E2   00??           01572     MOVWF USB_FILE_SIZE_HIGH
04E3   08??           01573     MOVF TAPE_SIZE_LOW, W
04E4   00??           01574     MOVWF USB_FILE_SIZE_LOW
04E5   2???           01575     CALL USB_BYTE_WRITE
04E6   300B           01576     MOVLW H'0B'
04E7   00??           01577     MOVWF TIMEOUT_HIGH
04E8   30B8           01578     MOVLW H'B8'
04E9   00??           01579     MOVWF TIMEOUT_LOW
04EA   301E           01580     MOVLW H'1E'
04EB   00??           01581     MOVWF USB_TARGET_STATUS
04EC   2???           01582     CALL USB_WAIT_STATUS
04ED                  01583 UFW_ND_LOOP
04ED   2???           01584     CALL BUFF_INIT
04EE   08??           01585     MOVF USB_BYTES_SENT_LOW, W
04EF   00??           01586     MOVWF RAM_ADDRESS_L
04F0   08??           01587     MOVF USB_BYTES_SENT_HIGH, W
04F1   00??           01588     MOVWF RAM_ADDRESS_H
04F2   03??           01589     DECF RAM_ADDRESS_L, F
04F3   1C03           01590     BTFSS STATUS, C
04F4   03??           01591     DECF RAM_ADDRESS_H, F
04F5   2???           01592     CALL BUFF_FILL
04F6   1108           01593     BCF PORTD,2
04F7   302D           01594     MOVLW H'2D'
04F8   00??           01595     MOVWF DREG
04F9   2???           01596     CALL SPI_TRANSFER   ;SEND WR_REQ_DATA
04FA   01??           01597     CLRF DREG
04FB   2???           01598     CALL SPI_TRANSFER   ;GET NUMBER OF BYTES TO SEND
04FC   08??           01599     MOVF DREG, W
04FD   00??           01600     MOVWF GEN_COUNT5
04FE                  01601 UFW_WR_LOOP
04FE   2???           01602     CALL BUFF_READ_AUTO
04FF   2???           01603     CALL SPI_TRANSFER
0500   0F??           01604     INCFSZ USB_BYTES_SENT_LOW, F
0501   03??           01605     DECF USB_BYTES_SENT_HIGH, F
0502   0A??           01606     INCF USB_BYTES_SENT_HIGH, F
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0503   08??           01607     MOVF USB_BYTES_SENT_HIGH, W
0504   06??           01608     XORWF USB_FILE_SIZE_HIGH, W
0505   1D03           01609     BTFSS STATUS, Z
0506   2???           01610     GOTO UFW_NB
0507   08??           01611     MOVF USB_BYTES_SENT_LOW, W
0508   06??           01612     XORWF USB_FILE_SIZE_LOW, W
0509   1903           01613     BTFSC STATUS, Z
050A   2???           01614     GOTO UFW_BREAK
050B                  01615 UFW_NB
050B   0B??           01616     DECFSZ GEN_COUNT5, F
050C   2???           01617     GOTO UFW_WR_LOOP
050D                  01618 UFW_BREAK
050D   1508           01619     BSF PORTD,2
050E   300B           01620     MOVLW H'0B'
050F   00??           01621     MOVWF TIMEOUT_HIGH
0510   30B8           01622     MOVLW H'B8'
0511   00??           01623     MOVWF TIMEOUT_LOW
0512   301E           01624     MOVLW H'1E'
0513   00??           01625     MOVWF USB_TARGET_STATUS
0514   2???           01626     CALL USB_WAIT_STATUS
0515   08??           01627     MOVF USB_BYTES_SENT_HIGH, W
0516   06??           01628     XORWF USB_FILE_SIZE_HIGH, W
0517   1D03           01629     BTFSS STATUS, Z
0518   2???           01630     GOTO UFW_NE
0519   08??           01631     MOVF USB_BYTES_SENT_LOW, W
051A   06??           01632     XORWF USB_FILE_SIZE_LOW, W
051B   1903           01633     BTFSC STATUS, Z
051C   2???           01634     GOTO UFW_EQUAL
051D                  01635 UFW_NE
051D   2???           01636     CALL USB_BYTE_WR_GO
051E   300B           01637     MOVLW H'0B'
051F   00??           01638     MOVWF TIMEOUT_HIGH
0520   30B8           01639     MOVLW H'B8'
0521   00??           01640     MOVWF TIMEOUT_LOW
0522   301E           01641     MOVLW H'1E'
0523   00??           01642     MOVWF USB_TARGET_STATUS
0524   2???           01643     CALL USB_WAIT_STATUS
0525   2???           01644     GOTO UFW_ND_LOOP
0526                  01645 UFW_EQUAL
0526   2???           01646     CALL USB_BYTE_WR_GO
0527   300B           01647     MOVLW H'0B'
0528   00??           01648     MOVWF TIMEOUT_HIGH
0529   30B8           01649     MOVLW H'B8'
052A   00??           01650     MOVWF TIMEOUT_LOW
052B   3014           01651     MOVLW H'14'
052C   00??           01652     MOVWF USB_TARGET_STATUS
052D   2???           01653     CALL USB_WAIT_STATUS
052E   2???           01654     CALL USB_FILE_CLOSE
052F   300B           01655     MOVLW H'0B'
0530   00??           01656     MOVWF TIMEOUT_HIGH
0531   30B8           01657     MOVLW H'B8'
0532   00??           01658     MOVWF TIMEOUT_LOW
0533   3014           01659     MOVLW H'14'
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0534   00??           01660     MOVWF USB_TARGET_STATUS
0535   2???           01661     CALL USB_WAIT_STATUS
0536   0008           01662     RETURN
                      01663 
0537                  01664 USB_FILE_READ
0537   30FF           01665     MOVLW H'FF'
0538   00??           01666     MOVWF RAM_ADDRESS_H
0539   00??           01667     MOVWF RAM_ADDRESS_L ;RAM ADDRESS WILL OVERFLOW BEFORE FIRST WRITE
053A   2???           01668     CALL USB_BYTE_READ
053B   01??           01669     CLRF TIMEOUT_HIGH
053C   3080           01670     MOVLW H'80'
053D   00??           01671     MOVWF TIMEOUT_LOW
053E   301D           01672     MOVLW H'1D'
053F   00??           01673     MOVWF USB_TARGET_STATUS
0540   2???           01674     CALL USB_WAIT_STATUS
0541   1D00           01675     BTFSS FLAG_REG, 2   ;CHECK TIMEOUT FLAG
0542   2???           01676     GOTO TIMEOUT_ERROR
0543                  01677 UFR_LOOP
0543   2???           01678     CALL USB_READ_DATA0
0544   3001           01679     MOVLW H'01'
0545   00??           01680     MOVWF DELAY_COUNTER
0546   2???           01681     CALL DELAY_MILLIS
0547   08??           01682     MOVF USB_FILE_SIZE_LOW, W
0548   06??           01683     XORWF USB_BYTES_READ_LOW, W
0549   1D03           01684     BTFSS STATUS, Z
054A   2???           01685     GOTO UFR_GO
054B   08??           01686     MOVF USB_FILE_SIZE_HIGH, W
054C   06??           01687     XORWF USB_BYTES_READ_HIGH, W
054D   1903           01688     BTFSC STATUS, Z
054E   2???           01689     GOTO UFR_DONE
054F                  01690 UFR_GO
054F   2???           01691     CALL USB_BYTE_READ_GO
0550   01??           01692     CLRF TIMEOUT_HIGH
0551   30FF           01693     MOVLW H'FF'
0552   00??           01694     MOVWF TIMEOUT_LOW
0553   301D           01695     MOVLW H'1D'
0554   00??           01696     MOVWF USB_TARGET_STATUS
0555   2???           01697     CALL USB_WAIT_STATUS
0556   2???           01698     GOTO UFR_LOOP
0557                  01699 UFR_DONE
0557   08??           01700     MOVF USB_FILE_SIZE_LOW, W
0558   00??           01701     MOVWF TAPE_SIZE_LOW
0559   08??           01702     MOVF USB_FILE_SIZE_HIGH, W
055A   00??           01703     MOVWF TAPE_SIZE_HIGH
055B   1108           01704     BCF PORTD,2
055C   3036           01705     MOVLW H'36'
055D   00??           01706     MOVWF DREG
055E   2???           01707     CALL SPI_TRANSFER   ;SEND FILE CLOSE COMMAND
055F   01??           01708     CLRF DREG
0560   2???           01709     CALL SPI_TRANSFER   ;FILE CLOSE PARAMETER IS 0 (DO NOT UPDATE FILE SIZE)
0561   1508           01710     BSF PORTD,2
0562   01??           01711     CLRF TIMEOUT_HIGH
0563   3080           01712     MOVLW H'80'
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0564   00??           01713     MOVWF TIMEOUT_LOW
0565   3014           01714     MOVLW H'14'
0566   00??           01715     MOVWF USB_TARGET_STATUS
0567   2???           01716     CALL USB_WAIT_STATUS
0568   0008           01717     RETURN
                      01718 
0569                  01719 TIMEOUT_ERROR
0569   08??           01720     MOVF DREG, W
056A   00??           01721     MOVWF TEMP2
056B   01??           01722     CLRF GEN_COUNT2
056C   3004           01723     MOVLW H'04'
056D   00??           01724     MOVWF STRING_ID
056E   2???           01725     CALL PRINT_STRING_SERIAL
056F   3020           01726     MOVLW H'20' ;SPACE CHAR
0570   00??           01727     MOVWF DREG
0571   2???           01728     CALL UART_SEND
0572   08??           01729     MOVF USB_TARGET_STATUS, W
0573   00??           01730     MOVWF DREG
0574   2???           01731     CALL BYTE_TO_HEX
0575   08??           01732     MOVF HEX_CHAR_HIGH, W
0576   00??           01733     MOVWF DREG
0577   2???           01734     CALL UART_SEND
0578   08??           01735     MOVF HEX_CHAR_LOW, W
0579   00??           01736     MOVWF DREG
057A   2???           01737     CALL UART_SEND
057B   300A           01738     MOVLW H'0A' ;NEW LINE CHAR
057C   00??           01739     MOVWF DREG
057D   2???           01740     CALL UART_SEND
057E   08??           01741     MOVF TEMP2, W
057F   00??           01742     MOVWF DREG
0580   0008           01743     RETURN
                      01744 
0581                  01745 BUFF_INIT
0581   1383           01746     BCF STATUS, IRP    ;SWITCH TO BANKS 0 AND 1
0582   30A0           01747     MOVLW H'A0' ;SWITCH TO BANK 1
0583   0084           01748     MOVWF FSR
0584   0008           01749     RETURN
                      01750 
0585                  01751 BUFF_FILL
0585   01??           01752     CLRF GEN_COUNT6
0586                  01753 BUFF_FILL_LOOP
0586   2???           01754     CALL RAM_READ_AUTO
0587   2???           01755     CALL BUFF_WRITE_AUTO
0588   0B??           01756     DECFSZ GEN_COUNT6, F
0589   2???           01757     GOTO BUFF_FILL_LOOP
058A   0008           01758     RETURN
                      01759 
058B                  01760 BUFF_WRITE_AUTO
058B   08??           01761     MOVF DREG, W
058C   0080           01762     MOVWF INDF
058D   2???           01763     GOTO BUFR_INC
058E                  01764 BUFF_READ_AUTO
058E   0800           01765     MOVF INDF, W
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

058F   00??           01766     MOVWF DREG
0590                  01767 BUFR_INC
0590   0A84           01768     INCF FSR, F
0591   0804           01769     MOVF FSR, W
0592   397F           01770     ANDLW H'7F'
0593   3A70           01771     XORLW H'70'
0594   1D03           01772     BTFSS STATUS, Z
0595   0008           01773     RETURN
0596   1B84           01774     BTFSC FSR, 7
0597   2???           01775     GOTO BUFR_ODD
0598                  01776 BUFR_EVEN
0598   1B83           01777     BTFSC STATUS, IRP
0599   2???           01778     GOTO BUFR_B2
059A                  01779 BUFR_B0
059A   2???           01780     GOTO BUILD_PANIC ;THIS FUNCTION SHOULD NEVER READ BANK 0!
059B                  01781 BUFR_B2
059B   3090           01782     MOVLW H'90' ;IRP ALREADY SET, SWITCH TO ODD BANKS
059C   0084           01783     MOVWF FSR
059D   0008           01784     RETURN
059E                  01785 BUFR_ODD
059E   1B83           01786     BTFSC STATUS, IRP
059F   2???           01787     GOTO BUFR_B3
05A0                  01788 BUFR_B1
05A0   1783           01789     BSF STATUS, IRP ;SWITCH TO BANKS 2 AND 3
05A1   3010           01790     MOVLW H'10' ;SWITCH TO EVEN BANKS
05A2   0084           01791     MOVWF FSR
05A3   0008           01792     RETURN
05A4                  01793 BUFR_B3
05A4   1383           01794     BCF STATUS, IRP ;SWITCH TO BANKS 0 AND 1
05A5   30A0           01795     MOVLW H'A0' ;SWITCH TO BANK 1
05A6   0084           01796     MOVWF FSR
05A7   0008           01797     RETURN
                      01798 
                      01799 STRINGS CODE H'0800' ;STRINGS AND TABLES
0800                  01800 STRING_TABLE
0800   08??           01801     MOVF STRING_ID, W
0801   0782           01802     ADDWF PCL, F
0802   2???           01803     GOTO HOME_STRING    ;ID0
0803   2???           01804     GOTO LOAD_STRING    ;ID1
0804   2???           01805     GOTO SAVE_STRING    ;ID2
0805   2???           01806     GOTO SEND_STRING    ;ID3
0806   2???           01807     GOTO TIMEOUT_STRING ;ID4
0807   2???           01808     GOTO NEXT_STRING    ;ID5
0808   2???           01809     GOTO BACK_STRING    ;ID6
                      01810 
0809                  01811 HOME_STRING
0809   08??           01812     MOVF STRING_INDEX, W
080A   0782           01813     ADDWF PCL,F
080B   3454           01814     RETLW 'T'
080C   3441           01815     RETLW 'A'
080D   3450           01816     RETLW 'P'
080E   3445           01817     RETLW 'E'
080F   3420           01818     RETLW ' '
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0810   3452           01819     RETLW 'R'
0811   3445           01820     RETLW 'E'
0812   3441           01821     RETLW 'A'
0813   3444           01822     RETLW 'D'
0814   3459           01823     RETLW 'Y'
0815   342E           01824     RETLW '.'
0816   3400           01825     RETLW H'00'
                      01826 
0817                  01827 LOAD_STRING
0817   08??           01828     MOVF STRING_INDEX, W
0818   0782           01829     ADDWF PCL,F
0819   344C           01830     RETLW 'L'
081A   344F           01831     RETLW 'O'
081B   3441           01832     RETLW 'A'
081C   3444           01833     RETLW 'D'
081D   3400           01834     RETLW H'00'
                      01835 
081E                  01836 SAVE_STRING
081E   08??           01837     MOVF STRING_INDEX, W
081F   0782           01838     ADDWF PCL,F
0820   3453           01839     RETLW 'S'
0821   3441           01840     RETLW 'A'
0822   3456           01841     RETLW 'V'
0823   3445           01842     RETLW 'E'
0824   3400           01843     RETLW H'00'
                      01844 
0825                  01845 SEND_STRING
0825   08??           01846     MOVF STRING_INDEX, W
0826   0782           01847     ADDWF PCL, F
0827   3453           01848     RETLW 'S'
0828   3445           01849     RETLW 'E'
0829   344E           01850     RETLW 'N'
082A   3444           01851     RETLW 'D'
082B   3400           01852     RETLW H'00'
                      01853 
082C                  01854 TIMEOUT_STRING
082C   08??           01855     MOVF STRING_INDEX, W
082D   0782           01856     ADDWF PCL, F
082E   3454           01857     RETLW 'T'
082F   3449           01858     RETLW 'I'
0830   344D           01859     RETLW 'M'
0831   3445           01860     RETLW 'E'
0832   344F           01861     RETLW 'O'
0833   3455           01862     RETLW 'U'
0834   3454           01863     RETLW 'T'
0835   343A           01864     RETLW ':'
0836   3400           01865     RETLW H'00'
                      01866 
0837                  01867 NEXT_STRING
0837   08??           01868     MOVF STRING_INDEX, W
0838   0782           01869     ADDWF PCL,F
0839   344E           01870     RETLW 'N'
083A   3445           01871     RETLW 'E'
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

083B   3458           01872     RETLW 'X'
083C   3454           01873     RETLW 'T'
083D   3400           01874     RETLW H'00'
                      01875 
083E                  01876 BACK_STRING
083E   08??           01877     MOVF STRING_INDEX, W
083F   0782           01878     ADDWF PCL,F
0840   3442           01879     RETLW 'B'
0841   3441           01880     RETLW 'A'
0842   3443           01881     RETLW 'C'
0843   344B           01882     RETLW 'K'
0844   3400           01883     RETLW H'00'
                      01884 
0845                  01885 HEX_STRING
0845   0782           01886     ADDWF PCL,F
0846   3430           01887     RETLW '0'
0847   3431           01888     RETLW '1'
0848   3432           01889     RETLW '2'
0849   3433           01890     RETLW '3'
084A   3434           01891     RETLW '4'
084B   3435           01892     RETLW '5'
084C   3436           01893     RETLW '6'
084D   3437           01894     RETLW '7'
084E   3438           01895     RETLW '8'
084F   3439           01896     RETLW '9'
0850   3441           01897     RETLW 'A'
0851   3442           01898     RETLW 'B'
0852   3443           01899     RETLW 'C'
0853   3444           01900     RETLW 'D'
0854   3445           01901     RETLW 'E'
0855   3446           01902     RETLW 'F'
                      01903 
                      01904 STRINGS2 CODE H'0900'
                      01905 
0900                  01906 SEND_232
0900   1007           01907     BCF PORTC,0 ;SEND STARTING BIT
0901   0000           01908     NOP
0902   2???           01909     CALL FULLDELAY_232
0903   1800           01910     BTFSC DREG,0 ;TEST FIRST BIT
0904   1407           01911     BSF PORTC,0 ;IF SET IN REGISTER SET TX LINE
0905   1C00           01912     BTFSS DREG,0 ;TEST FIRST BIT
0906   1007           01913     BCF PORTC,0 ;IF CLEAR IN REGISTER CLEAR TX LINE
0907   2???           01914     CALL TXDELAY_232
0908   1880           01915     BTFSC DREG,1
0909   1407           01916     BSF PORTC,0
090A   1C80           01917     BTFSS DREG,1
090B   1007           01918     BCF PORTC,0
090C   2???           01919     CALL TXDELAY_232
090D   1900           01920     BTFSC DREG,2
090E   1407           01921     BSF PORTC,0
090F   1D00           01922     BTFSS DREG,2
0910   1007           01923     BCF PORTC,0
0911   2???           01924     CALL TXDELAY_232
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0912   1980           01925     BTFSC DREG,3
0913   1407           01926     BSF PORTC,0
0914   1D80           01927     BTFSS DREG,3
0915   1007           01928     BCF PORTC,0
0916   2???           01929     CALL TXDELAY_232
0917   1A00           01930     BTFSC DREG,4
0918   1407           01931     BSF PORTC,0
0919   1E00           01932     BTFSS DREG,4
091A   1007           01933     BCF PORTC,0
091B   2???           01934     CALL TXDELAY_232
091C   1A80           01935     BTFSC DREG,5
091D   1407           01936     BSF PORTC,0
091E   1E80           01937     BTFSS DREG,5
091F   1007           01938     BCF PORTC,0
0920   2???           01939     CALL TXDELAY_232
0921   1B00           01940     BTFSC DREG,6
0922   1407           01941     BSF PORTC,0
0923   1F00           01942     BTFSS DREG,6
0924   1007           01943     BCF PORTC,0
0925   2???           01944     CALL TXDELAY_232
0926   1B80           01945     BTFSC DREG,7
0927   1407           01946     BSF PORTC,0
0928   1F80           01947     BTFSS DREG,7
0929   1007           01948     BCF PORTC,0
092A   2???           01949     CALL TXDELAY_232
092B   1407           01950     BSF PORTC,0 ;SEND STOP BIT
092C   2???           01951     CALL FULLDELAY_232
092D   0008           01952     RETURN
                      01953 
092E   01??           01954 RECEIVE     CLRF DREG    ;CLEAR REGISTER WHERE MESSAGE WILL BE STORED
092F   1887           01955 WAIT_232    BTFSC PORTC,1
0930   2???           01956             GOTO WAIT_232
0931   2???           01957             CALL HALFDELAY_232
0932   2???           01958             CALL FULLDELAY_232
0933   1887           01959             BTFSC PORTC,1   ;CHECK FIRST BIT
0934   1400           01960             BSF DREG,0
0935   2???           01961             CALL FULLDELAY_232
0936   1887           01962             BTFSC PORTC,1   ;CHECK BIT 1
0937   1480           01963             BSF DREG,1
0938   2???           01964             CALL FULLDELAY_232
0939   1887           01965             BTFSC PORTC,1   ;CHECK BIT2
093A   1500           01966             BSF DREG,2
093B   2???           01967             CALL FULLDELAY_232
093C   1887           01968             BTFSC PORTC,1   ;CHECK BIT 3
093D   1580           01969             BSF DREG,3
093E   2???           01970             CALL FULLDELAY_232
093F   1887           01971             BTFSC PORTC,1   ;CHECK BIT 4
0940   1600           01972             BSF DREG,4
0941   2???           01973             CALL FULLDELAY_232
0942   1887           01974             BTFSC PORTC,1   ;CHECK BIT 5
0943   1680           01975             BSF DREG,5
0944   2???           01976             CALL FULLDELAY_232
0945   1887           01977             BTFSC PORTC,1   ;CHECK BIT 6
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0946   1700           01978             BSF DREG,6
0947   2???           01979             CALL FULLDELAY_232
0948   1887           01980             BTFSC PORTC,1   ;CHECK BIT 7
0949   1780           01981             BSF DREG,7
094A   2???           01982             CALL HALFDELAY_232  ;TO PREVENT FALSE TRIGGER
094B   0008           01983             RETURN
                      01984 
094C                  01985 FULLDELAY_232   ;DESIGNED FOR 4MHZ CLOCK AND 2400 BAUD RATE
094C   3052           01986             MOVLW 52H
094D   00??           01987             MOVWF GEN_COUNT
094E                  01988 FULLDELAY_2322
094E   0000           01989             NOP
094F   0000           01990             NOP
0950   0B??           01991             DECFSZ GEN_COUNT,1
0951   2???           01992             GOTO FULLDELAY_2322
0952   0008           01993             RETURN
0953                  01994 HALFDELAY_232   ;DESIGNED FOR 4MHZ CLOCK AND 2400 BAUD RATE
0953   301D           01995             MOVLW 1DH
0954   00??           01996             MOVWF GEN_COUNT
0955                  01997 HALFDELAY_2322
0955   0000           01998             NOP
0956   0000           01999             NOP
0957   0000           02000             NOP
0958   0000           02001             NOP
0959   0B??           02002             DECFSZ GEN_COUNT,1
095A   2???           02003             GOTO HALFDELAY_2322
095B   0008           02004             RETURN
                      02005 
095C   3066           02006 TXDELAY_232 MOVLW 66H
095D   00A4           02007             MOVWF 24H
095E                  02008 TXDELAY_2322
095E   0000           02009             NOP ;DESIGNED FOR 4MHz CLOCK AND 2400 BAUD RATE
095F   0BA4           02010             DECFSZ 24H,1
0960   2???           02011             GOTO TXDELAY_2322
0961   0008           02012             RETURN
                      02013 
0962                  02014 INT_TEST_START
0962   0181           02015     CLRF TMR0
0963   0000           02016     NOP
0964   110B           02017     BCF INTCON, T0IF
0965   178B           02018     BSF INTCON, GIE
0966   0008           02019     RETURN
                      02020 
0967                  02021 INT_TEST_STOP
0967   138B           02022     BCF INTCON, GIE
0968   0008           02023     RETURN
                      02024 
3F23 3FBC             02025     END
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 40


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ACQT0                             00000003
ACQT1                             00000004
ACQT2                             00000005
ADCON0                            0000001F
ADCON1                            0000009F
ADCON2                            0000009B
ADCS0                             00000006
ADCS1                             00000007
ADCS2                             00000006
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BACK_STRING                       0000083E
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BIT_COUNT                         0000001A
BLOCK_DATA_LOOP                   00000215
BP_HALT                           0000024C
BRGH                              00000002
BUFFER_1                          00000000
BUFFER_2                          00000000
BUFFER_3                          00000000
BUFF_FILL                         00000585
BUFF_FILL_LOOP                    00000586
BUFF_INIT                         00000581
BUFF_READ_AUTO                    0000058E
BUFF_WRITE_AUTO                   0000058B
BUFR_B0                           0000059A
BUFR_B1                           000005A0
BUFR_B2                           0000059B
BUFR_B3                           000005A4
BUFR_EVEN                         00000598
BUFR_INC                          00000590
BUFR_ODD                          0000059E
BUILD_ALIGN                       0000021E
BUILD_BYTE                        00000224
BUILD_ERROR                       00000236
BUILD_LOOP                        00000226
BUILD_NO_ERROR                    00000239
BUILD_PANIC                       00000249
BUILD_WORD                        000002E9
BUILD_WORD_LOOP                   000002EB
BYTE_TO_HEX                       000002DE
C                                 00000000
C1INV                             00000004
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 41


SYMBOL TABLE
  LABEL                             VALUE 

C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCP3CON                           00000097
CCP3IE                            00000001
CCP3IF                            00000001
CCP3M0                            00000000
CCP3M1                            00000001
CCP3M2                            00000002
CCP3M3                            00000003
CCP3X                             00000005
CCP3Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CCPR3                             00000095
CCPR3H                            00000096
CCPR3L                            00000095
CFS2                              00000333
CFS3                              0000033A
CFS4                              00000343
CHECK_FREE_SPACE                  0000032B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CHS3                              00000001
CIS                               00000003
CKE                               00000006
CKP                               00000004
CLEARDISPLAY                      00000147
CLLOOP40                          0000015C
CM0                               00000000
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 42


SYMBOL TABLE
  LABEL                             VALUE 

CM1                               00000001
CM2                               00000002
CMCON                             0000009C
CMD_CLEARDISPLAY                  0000008E
CMD_LCD_CLEAR1                    0000008A
CMD_LCD_CLEAR2                    0000008C
CMD_LINE2                         00000088
CMD_MEM_CLEAR                     00000097
CMD_MEM_DUMP                      00000092
CMD_PRINT_HOME                    00000094
CMD_PRINT_NAME                    00000090
CMD_SETHOME                       00000086
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
CVR0                              00000000
CVR1                              00000001
CVR2                              00000002
CVR3                              00000003
CVRCON                            0000009D
CVREN                             00000007
CVROE                             00000006
CVRR                              00000005
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
DELAY_COUNTER                     00000031
DELAY_MILLIS                      00000302
DISPLAYON                         0000013F
DM_INNER                          00000306
DM_OUTER                          00000304
DREG                              00000000
D_A                               00000005
D_NOT_A                           00000005
F                                 00000001
FERR                              00000002
FIRST_BLOCK_LOOP                  000001F8
FLAG_REG                          00000034
FSR                               00000004
FULLDELAY_232                     0000094C
FULLDELAY_2322                    0000094E
FUNCTIONSET_LCD                   00000135
GCEN                              00000007
GEN_COUNT                         0000000A
GEN_COUNT2                        0000000B
GEN_COUNT3                        0000000C
GEN_COUNT4                        0000000D
GEN_COUNT5                        0000000E
GEN_COUNT6                        0000000F
GET_LEADER                        000001D7
GET_TEST_BYTE                     000002F7
GIE                               00000007
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 43


SYMBOL TABLE
  LABEL                             VALUE 

GL_FIX                            000001E1
GL_FIX2                           000001E4
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
GTB_UPDATE                        000002FD
HALFDELAY_232                     00000953
HALFDELAY_2322                    00000955
HEX_CHAR_HIGH                     0000001B
HEX_CHAR_LOW                      0000001C
HEX_STRING                        00000845
HOME_STRING                       00000809
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INITIALIZE                        00000005
INT0IE                            00000004
INT0IF                            00000001
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
INT_TEST_START                    00000962
INT_TEST_STOP                     00000967
IOFS                              00000002
IRCF0                             00000004
IRCF1                             00000005
IRCF2                             00000006
IRP                               00000007
IRVST                             00000005
LCD_CLEAR1                        00000164
LCD_CLEAR12                       0000016A
LCD_CLEAR2                        00000172
LCD_CLEAR22                       00000178
LCD_SEND                          00000126
LCD_SEND_LOOP                     00000129
LDEL_COUNT                        00000009
LEADER_LOOP                       000001D9
LEADER_OUT                        00000260
LEADER_OUT2                       00000278
LEADER_WAIT                       00000262
LEADER_WAIT2                      0000027A
LINE2_LCD                         00000157
LISTEN                            0000006E
LISTEN2                           00000076
LOAD_STRING                       00000817
LVDCON                            00000109
LVDEN                             00000004
LVDIE                             00000005
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 44


SYMBOL TABLE
  LABEL                             VALUE 

LVDIF                             00000005
LVDL0                             00000000
LVDL1                             00000001
LVDL2                             00000002
LVDL3                             00000003
MAIN                              0000003E
MEM_CLEAR                         00000099
MEM_CLEAR_LOOP                    0000009F
MEM_DUMP                          000000AB
MEM_DUMP_LOOP                     000000AF
NAME_COPY                         000001D0
NEXT_STRING                       00000837
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_EOF_BLOCK                     00000210
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
OSCCON                            0000008F
OSCTUNE                           00000090
OSFIE                             00000007
OSFIF                             00000007
OSTS                              00000003
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PHASE1                            000002A6
PHASE2                            000002AD
PHASE2_NEXT                       000002BB
PHASE3                            000002B5
PHASE4                            000002B9
PHASE_DONE                        000002C4
PIE1                              0000008C
PIE2                              0000008D
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 45


SYMBOL TABLE
  LABEL                             VALUE 

PIR1                              0000000C
PIR2                              0000000D
PMADR                             0000010D
PMADRH                            0000010F
PMCON1                            0000018C
PMDATA                            0000010C
PMDATH                            0000010E
PN_LOOP                           00000191
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PRINT_NAME                        0000018B
PRINT_STRING_LCD                  0000019B
PRINT_STRING_SERIAL               000001AD
PRINT_TEST_DATA                   0000030D
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSL2                              0000019D
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
PSS2                              000001AE
PTD_INNER                         0000030F
PTD_NO_NEWLINE                    00000316
PTD_OUTER                         0000030E
PULSE_E                           00000180
PULSE_LENGTH                      00000005
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RAM_ADDRESS_H                     00000006
RAM_ADDRESS_L                     00000007
RAM_CONFIG                        00000112
RAM_CONFIG_C                      00000118
RAM_CONFIG_D                      0000011F
RAM_READ                          000000C7
RAM_READ_AUTO                     000000C4
RAM_WAIT_AH                       000000CD
RAM_WAIT_AL                       000000D5
RAM_WAIT_D                        000000DC
RAM_WAIT_R                        000000E3
RAM_WRITE                         000000EE
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 46


SYMBOL TABLE
  LABEL                             VALUE 

RAM_WRITE_AH                      000000F4
RAM_WRITE_AL                      000000FC
RAM_WRITE_AUTO                    000000EB
RAM_WRITE_D                       00000104
RAM_WRITE_R                       0000010B
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
RE3                               00000003
READ_WRITE                        00000002
RECEIVE                           0000092E
RP0                               00000005
RP1                               00000006
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 47


SYMBOL TABLE
  LABEL                             VALUE 

S                                 00000003
SAVE_BLOCKS                       00000201
SAVE_FIRST_BLOCK                  000001EC
SAVE_STRING                       0000081E
SBOREN                            00000002
SCS0                              00000000
SCS1                              00000001
SDEL_COUNT                        00000008
SEN                               00000000
SEND_232                          00000900
SEND_STRING                       00000825
SEND_TAPE                         00000084
SETHOME_LCD                       0000014F
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SPI_TRANSFER                      000002D3
SPI_WAIT                          000002D7
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STRING_ID                         00000033
STRING_INDEX                      00000032
STRING_TABLE                      00000800
SWDTE                             00000000
SWDTEN                            00000000
SYNC                              00000004
S_REG_HIGH                        0000002D
S_REG_LOW                         0000002E
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1RUN                             00000006
T1SYNC                            00000002
T2CKPS0                           00000000
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 48


SYMBOL TABLE
  LABEL                             VALUE 

T2CKPS1                           00000001
T2CON                             00000012
TAPE_DELAY                        0000024D
TAPE_IN                           000001BA
TAPE_INT                          00000291
TAPE_NAME                         00000010
TAPE_NAMEBLOCK                    00000268
TAPE_NE                           0000027E
TAPE_OUT                          00000253
TAPE_PAUSE                        000002C6
TAPE_SIZE_HIGH                    00000018
TAPE_SIZE_LOW                     00000019
TAPE_W1                           00000269
TAPE_W2                           0000026B
TAPE_W3                           0000027F
TAPE_W4                           00000281
TEMP1                             00000001
TEMP2                             00000002
TEMP3                             00000003
TEMP4                             00000004
TIMEOUT_ERROR                     00000569
TIMEOUT_HIGH                      00000030
TIMEOUT_LOW                       0000002F
TIMEOUT_STRING                    0000082C
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TP1                               000002C8
TP2                               000002CA
TP3                               000002CC
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 49


SYMBOL TABLE
  LABEL                             VALUE 

TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRISE3                            00000003
TRMT                              00000001
TUN0                              00000000
TUN1                              00000001
TUN2                              00000002
TUN3                              00000003
TUN4                              00000004
TUN5                              00000005
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXDELAY_232                       0000095C
TXDELAY_2322                      0000095E
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
UART_READ                         000000BA
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

UART_SEND                         000000BF
UFR_DONE                          00000557
UFR_GO                            0000054F
UFR_LOOP                          00000543
UFW_BREAK                         0000050D
UFW_EQUAL                         00000526
UFW_NB                            0000050B
UFW_ND_LOOP                       000004ED
UFW_NE                            0000051D
UFW_WR_LOOP                       000004FE
URD_LOOP                          0000038F
USB_BYTES_READ_HIGH               00000021
USB_BYTES_READ_LOW                00000022
USB_BYTES_SENT_HIGH               0000001D
USB_BYTES_SENT_LOW                0000001E
USB_BYTE_READ                     00000372
USB_BYTE_READ_GO                  0000037E
USB_BYTE_WRITE                    000003BE
USB_BYTE_WR_GO                    000003CA
USB_CHECK_EXISTS                  000003AB
USB_DISK_CAPACITY                 00000417
USB_DISK_CONNECT                  000003DE
USB_DISK_MOUNT                    000003D8
USB_DISK_QUERY                    0000043C
USB_DRIVE_SIZE1                   00000023
USB_DRIVE_SIZE2                   00000024
USB_DRIVE_SIZE3                   00000025
USB_FILE_CLOSE                    00000369
USB_FILE_CREATE                   000003B8
USB_FILE_OPEN                     00000363
USB_FILE_READ                     00000537
USB_FILE_SIZE_HIGH                0000001F
USB_FILE_SIZE_LOW                 00000020
USB_FILE_WRITE                    000004D0
USB_FREE_SPACE1                   00000026
USB_FREE_SPACE2                   00000027
USB_FREE_SPACE3                   00000028
USB_GET_FILE_SIZE                 00000396
USB_GET_STATUS                    000003D0
USB_GET_VERSION                   000003FF
USB_LOGICAL_BYTES1                00000029
USB_LOGICAL_BYTES2                0000002A
USB_LOGICAL_BYTES3                0000002B
USB_READ_DATA0                    00000384
USB_RESET_ALL                     00000347
USB_SET_FILE_NAME                 0000034D
USB_SET_MODE_5                    000003E4
USB_SET_MODE_6                    000003ED
USB_SET_MODE_7                    000003F6
USB_TARGET_STATUS                 0000002C
USB_WAIT_STATUS                   00000407
USB_WRITE_TEST_DATA               00000473
USFN_LOOP                         00000359
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

UWS_LOOP                          00000409
UWTD_BREAK                        000004A4
UWTD_EQUAL                        000004BD
UWTD_L4                           00000480
UWTD_NB                           000004A2
UWTD_ND_LOOP                      0000048D
UWTD_NE                           000004B4
UWTD_WR_LOOP                      00000495
VCFG0                             00000004
VCFG1                             00000005
W                                 00000000
WAIT_232                          0000092F
WAIT_START                        0000022B
WAIT_STOP                         00000230
WCOL                              00000007
WDTCON                            00000105
WDTPS0                            00000001
WDTPS1                            00000002
WDTPS2                            00000003
WDTPS3                            00000004
Z                                 00000002
_BOREN_0                          00003FBF
_BOREN_1                          00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_BORSEN_0                         00003FBF
_BORSEN_1                         00003FFF
_BORSEN_OFF                       00003FBF
_BORSEN_ON                        00003FFF
_BORV_20                          00003FFF
_BORV_27                          00003F7F
_BORV_42                          00003EFF
_BORV_45                          00003E7F
_CCP2MX_RB3                       00002FFF
_CCP2MX_RC1                       00003FFF
_CCP2_RB3                         00002FFF
_CCP2_RC1                         00003FFF
_CONFIG1                          00002007
_CONFIG2                          00002008
_CP_ALL                           00001FFF
_CP_OFF                           00003FFF
_CP_ON                            00001FFF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_EXTCLK                           00003FEF
_EXTRC_CLKOUT                     00003FFF
_EXTRC_IO                         00003FFE
_FCMEN_OFF                        00003FFE
_FCMEN_ON                         00003FFF
_FOSC_EC                          00003FEF
_FOSC_EXTRCCLK                    00003FFF
_FOSC_EXTRCIO                     00003FFE
MPASM 5.83                          MAIN.ASM   3-22-2022  15:07:27         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

_FOSC_HS                          00003FEE
_FOSC_INTOSCCLK                   00003FFD
_FOSC_INTOSCIO                    00003FFC
_FOSC_LP                          00003FEC
_FOSC_XT                          00003FED
_HS_OSC                           00003FEE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_IESO_OFF                         00003FFD
_IESO_ON                          00003FFF
_INTRC_CLKOUT                     00003FFD
_INTRC_IO                         00003FFC
_LP_OSC                           00003FEC
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_MCLR_OFF                         00003FDF
_MCLR_ON                          00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_VBOR_2_0                         00003FFF
_VBOR_2_7                         00003F7F
_VBOR_4_2                         00003EFF
_VBOR_4_5                         00003E7F
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FED
__16F747                          00000001

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    22 reported,     0 suppressed

